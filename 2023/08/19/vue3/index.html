<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Vue3相关技术 | Chao Pang的个人主页</title><meta name="author" content="Chao Pang"><meta name="copyright" content="Chao Pang"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="Vue3快速上手简介Vue是一套用于构建用户界面的渐进式框架。Vue的核心库只关注视图层，不仅易于上手，还便于与第三方库或既有项目整合。 Vue3发布于2020年9月19日，它在Vue2.x的基础上进行了一些优化，对TypeScript有了更好的支持。 vue-devtoolsvue-devtools是一个Chrome浏览器的插件，是官方提供的一个Vue开发者工具，方便用户在开发Vue项目时调试。">
<meta property="og:type" content="article">
<meta property="og:title" content="Vue3相关技术">
<meta property="og:url" content="http://sdupc.top/2023/08/19/vue3/index.html">
<meta property="og:site_name" content="Chao Pang的个人主页">
<meta property="og:description" content="Vue3快速上手简介Vue是一套用于构建用户界面的渐进式框架。Vue的核心库只关注视图层，不仅易于上手，还便于与第三方库或既有项目整合。 Vue3发布于2020年9月19日，它在Vue2.x的基础上进行了一些优化，对TypeScript有了更好的支持。 vue-devtoolsvue-devtools是一个Chrome浏览器的插件，是官方提供的一个Vue开发者工具，方便用户在开发Vue项目时调试。">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://s2.loli.net/2023/10/21/g4juA53xnB2bEMT.png">
<meta property="article:published_time" content="2023-08-19T06:48:17.000Z">
<meta property="article:modified_time" content="2024-07-06T07:03:35.525Z">
<meta property="article:author" content="Chao Pang">
<meta property="article:tag" content="Vue3">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://s2.loli.net/2023/10/21/g4juA53xnB2bEMT.png"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://sdupc.top/2023/08/19/vue3/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css?v=4.13.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.11.1/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Vue3相关技术',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-07-06 15:03:35'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 5.4.2"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><script>(()=>{
  const $loadingBox = document.getElementById('loading-box')
  const $body = document.body
  const preloader = {
    endLoading: () => {
      $body.style.overflow = ''
      $loadingBox.classList.add('loaded')
    },
    initLoading: () => {
      $body.style.overflow = 'hidden'
      $loadingBox.classList.remove('loaded')
    }
  }

  preloader.initLoading()
  window.addEventListener('load',() => { preloader.endLoading() })

  if (false) {
    document.addEventListener('pjax:send', () => { preloader.initLoading() })
    document.addEventListener('pjax:complete', () => { preloader.endLoading() })
  }
})()</script><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://i.loli.net/2021/11/29/nu4tpl8PIgFQBAr.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">29</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">23</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">7</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于我</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://s2.loli.net/2023/10/21/g4juA53xnB2bEMT.png')"><nav id="nav"><span id="blog-info"><a href="/" title="Chao Pang的个人主页"><span class="site-name">Chao Pang的个人主页</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于我</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Vue3相关技术</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-08-19T06:48:17.000Z" title="发表于 2023-08-19 14:48:17">2023-08-19</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-07-06T07:03:35.525Z" title="更新于 2024-07-06 15:03:35">2024-07-06</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E7%AB%A0/">技术文章</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="Vue3相关技术"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="Vue3快速上手"><a href="#Vue3快速上手" class="headerlink" title="Vue3快速上手"></a>Vue3快速上手</h1><h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>Vue是一套用于构建用户界面的渐进式框架。Vue的核心库只关注视图层，不仅易于上手，还便于与第三方库或既有项目整合。</p>
<p>Vue3发布于2020年9月19日，它在Vue2.x的基础上进行了一些优化，对TypeScript有了更好的支持。</p>
<h3 id="vue-devtools"><a href="#vue-devtools" class="headerlink" title="vue-devtools"></a>vue-devtools</h3><p>vue-devtools是一个Chrome浏览器的插件，是官方提供的一个Vue开发者工具，方便用户在开发Vue项目时调试。可以在官网安装，但操作较为复杂。访问极简插件网</p>
<p><a target="_blank" rel="noopener" href="https://chrome.zzzmh.cn/">https://chrome.zzzmh.cn</a></p>
<p>在线安装较为简单。</p>
<h3 id="创建Vue3项目"><a href="#创建Vue3项目" class="headerlink" title="创建Vue3项目"></a>创建Vue3项目</h3><p>可以使用vue-cli创建。</p>
<p>安装或升级vue cli，保证版本在4.5.0以上</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vue --version</span><br><span class="line"></span><br><span class="line">vue create &lt;proj_name&gt;</span><br></pre></td></tr></table></figure>

<h2 id="Vue常用指令介绍"><a href="#Vue常用指令介绍" class="headerlink" title="Vue常用指令介绍"></a>Vue常用指令介绍</h2><p>Vue指令是带有v-前缀的特殊属性。他的职责是当表达式的值改变时，将其产生的连带影响响应式地作用于DOM。</p>
<h3 id="v-text"><a href="#v-text" class="headerlink" title="v-text"></a>v-text</h3><p>v-text用于操作纯文本，它会替代显示对应的数据对象上的值。当绑定的数据对象上的值发生改变时，插值处的内容也会随之更新。</p>
{{ }}会将数据解释为普通文本，而非HTML代码。

<p>在多数场景时，v-text可以用{{ }}代替，但是{{ }}更加灵活。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;div v-text = &quot;message&quot;&gt;&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<h3 id="v-model和v-bind"><a href="#v-model和v-bind" class="headerlink" title="v-model和v-bind"></a>v-model和v-bind</h3><p>v-model是Vue提供的一个特殊属性，实际上是语法糖，作用是双向绑定表单控件。只能运用于表单元素（input（radio、text、address、email……）、select、checkbox、textarea……）中。</p>
<ul>
<li>双向数据绑定：当数据发生改变，DOM会自动更新，当表单控件的值发生改变，数据也会自动得到更新。</li>
</ul>
<p>v-bind是用于绑定属性的指令，可以简写为 : ，只能实现数据的单向绑定，从Model自动绑定到View。</p>
<h3 id="v-once"><a href="#v-once" class="headerlink" title="v-once"></a>v-once</h3><p>只渲染元素和组件一次，在随后的渲染中，元素&#x2F;组件所有的子节点将被视为静态内容并跳过。</p>
<h3 id="v-cloak"><a href="#v-cloak" class="headerlink" title="v-cloak"></a>v-cloak</h3><p>这个指令保持在元素上直到关联组件实例结束编译。和CSS规则一起用时，这个指令可以隐藏未编译的Mustache标签（双大括号），直到组件实例准备完毕。</p>
<p>主要用于多页应用中，解决当网速较慢，Vue.js文件还没加载完时，绑定的数据会先闪一下{{ }}符号，然后再显示所绑定数据的问题。</p>
<h3 id="v-for和key属性"><a href="#v-for和key属性" class="headerlink" title="v-for和key属性"></a>v-for和key属性</h3><p>v-for主要用于数据遍历，有如下四种使用方式：</p>
<ol>
<li><p>迭代普通数组</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;ul&gt;</span><br><span class="line">    &lt;li v-for=&quot;(item, index) in list&quot; :key=&quot;index&quot;&gt;&#123;&#123;++ index&#125;&#125;.&#123;&#123;item&#125;&#125;&lt;/li&gt;</span><br><span class="line">&lt;/ul&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>迭代对象数组</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;ul&gt;</span><br><span class="line">    &lt;li v-for=&quot;(item, index) in users&quot; :key=&quot;index&quot;&gt;</span><br><span class="line">        &#123;&#123;index++&#125;&#125;.[&#123;&#123;item.title&#125;&#125;]&#123;&#123;item.name&#125;&#125;&lt;/li&gt;</span><br><span class="line">&lt;/ul&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>迭代对象中的属性</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;p v-for=&quot;(val, key, index) in userInfo&quot; :key=&quot;index&quot;&gt;</span><br><span class="line">    键是：&#123;&#123;key&#125;&#125;，值是：&#123;&#123;value&#125;&#125;，索引：&#123;&#123;index&#125;&#125;</span><br><span class="line">&lt;/p&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>迭代数字</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;p v-for=&quot;i in 7&quot; :key=&quot;i&quot;&gt;</span><br><span class="line">    这是第&#123;&#123;i&#125;&#125;个p标签</span><br><span class="line">&lt;/p&gt;</span><br></pre></td></tr></table></figure></li>
</ol>
<p><code>v-for</code> 的默认方式是尝试就地更新元素而不移动它们。要强制其重新排序元素，你需要用特殊 attribute <code>key</code> 来提供一个排序提示。在vue2中key是必须的，vue3中可以不写。</p>
<h3 id="v-on"><a href="#v-on" class="headerlink" title="v-on"></a>v-on</h3><p>事件绑定机制。v-on可以被缩写为@。</p>
<p>有时候需要在内联语句处理程序中访问原始DOM事件，可以使用特殊$event变量将其传递给方法。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;button @click=&quot;onBtnClick(&#x27;事件1&#x27;, $event)&quot;&gt;</span><br><span class="line">    获取事件对象</span><br><span class="line">&lt;/button&gt;</span><br></pre></td></tr></table></figure>

<p>存在多个事件参数时，$event通常放到最后。</p>
<ul>
<li><p>多事件处理</p>
<p>在事件处理中可以使用逗号分隔多个事件处理程序。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;button @click=&quot;onOne(), onTwo()&quot;&gt;</span><br><span class="line">    执行多个事件</span><br><span class="line">&lt;/button&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>事件修饰符</p>
<p>在事件处理程序中调用event.preventDefault( ) 阻止默认事件或event.stopPropagation( ) 阻止冒泡是十分常见的需求。v-on中存在事件修饰符，是由点开头的指令后缀来表示的。包括以下几类：</p>
<ol>
<li>stop：阻止冒泡<br>js事件冒泡：在一个对象上触发某类事件，如果此对象定义了此事件的处理程序，那么此事件就会调用这个程序，如果没有定义或者事件返回true，那么这个事件会向这个对象的父级对象传播，从里到外，直到它被处理或到达对象层级的最顶层。</li>
<li>prevent：阻止默认事件</li>
<li>capture：添加事件侦听器时使用事件捕获模式</li>
<li>self：只有事件在该元素本身（比如不是子元素）触发时触发回调</li>
<li>once：事件只触发一次</li>
<li>passive：会告诉浏览器你不想阻止事件的默认行为</li>
</ol>
</li>
</ul>
<h2 id="在Vue中使用样式"><a href="#在Vue中使用样式" class="headerlink" title="在Vue中使用样式"></a>在Vue中使用样式</h2><h3 id="使用class样式"><a href="#使用class样式" class="headerlink" title="使用class样式"></a>使用class样式</h3><p>这里的class需要使用v-bind做数据绑定。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 1.数组 --&gt;</span><br><span class="line">&lt;div :class=&quot;[&#x27;red&#x27;, &#x27;default&#x27;]&quot;&gt;</span><br><span class="line">	待我长发及腰，东风笑别菡涛。 参商一面将报，百里关山人笑。</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;!-- 2.在数组中使用三元表达式 --&gt;</span><br><span class="line">&lt;div :class=&quot;[&#x27;default&#x27;, isActive ? &#x27;active&#x27; : &#x27;&#x27;]&quot;&gt;</span><br><span class="line">	凛冬月光妖娆，似媚故国人廖。连里塞外相邀，重阳茱萸早消。</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;!-- 3.在数组中使用 对象来代替三元表达式，提高代码的可读性 --&gt;</span><br><span class="line">&lt;div :class=&quot;[&#x27;default&#x27;, &#x27;italic&#x27;, &#123; active: isActive &#125;]&quot;&gt;</span><br><span class="line">	待我长发及腰，北方佳丽可好。似曾相识含苞，风花雪月明了。</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;!-- 4.直接使用对象 --&gt;</span><br><span class="line">&lt;div :class=&quot;&#123; default: true, italic: true, active: true &#125;&quot;&gt;</span><br><span class="line">	心有茂霜无慌，南柯一梦黄粱。相得益彰君郎，红灯澜烛入帐。</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;div :class=&quot;classObj&quot;&gt;</span><br><span class="line">	待我长发及腰，伊人归来可好，我已万国来朝，不见阮郎一笑。</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;!-- 5. class和:class共用 --&gt;</span><br><span class="line">&lt;div class=&quot;red bold&quot; :class=&quot;classObj&quot;&gt;年年月月花相似&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">	data() &#123;</span><br><span class="line">		return &#123;</span><br><span class="line">			isActive: false,</span><br><span class="line">			classObj: &#123; default: true, italic: true, active: true &#125;,</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">.red &#123;</span><br><span class="line">	color: red;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.default &#123;</span><br><span class="line">	font-size: 14px;</span><br><span class="line">	line-height: 24px;</span><br><span class="line">	height: 24px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.active &#123;</span><br><span class="line">	background: green;</span><br><span class="line">	color: white;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.italic &#123;</span><br><span class="line">	font-style: italic;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.bold &#123;</span><br><span class="line">	font-weight: bold;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h2 id="使用内联样式"><a href="#使用内联样式" class="headerlink" title="使用内联样式"></a>使用内联样式</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;div :style=&quot;&#123; color: &#x27;blue&#x27;, &#x27;font-size&#x27;: &#x27;24px&#x27; &#125;&quot;&gt;</span><br><span class="line">	若我会见到你，事隔经年。我如何贺你，以眼泪，以沉默。</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;div :style=&quot;styleObj&quot;&gt;</span><br><span class="line">	最美的爱情，不是天荒，也不是地老，只是永远在一起。</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;div :style=&quot;[styleBase, styleOrange]&quot;&gt;曾经沧海难为水，除却巫山不是云&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">	data () &#123;</span><br><span class="line">		return &#123;</span><br><span class="line">			styleObj: &#123; color: &#x27;green&#x27;, &#x27;font-size&#x27;: &#x27;18px&#x27; &#125;,</span><br><span class="line">			styleBase: &#123; &#x27;font-size&#x27;: &#x27;18px&#x27; &#125;,</span><br><span class="line">			styleOrange: &#123; color: &#x27;orange&#x27;, background: &#x27;#000000&#x27; &#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h2 id="条件判断"><a href="#条件判断" class="headerlink" title="条件判断"></a>条件判断</h2><h3 id="v-if"><a href="#v-if" class="headerlink" title="v-if"></a>v-if</h3><p>v-if指令用于条件性地渲染一块内容，这块内容只会在指令的表达式返回true值时被渲染。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;p v-if=&quot;flag&quot;&gt;柳暗花明又一村&lt;/p&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">	data() &#123;</span><br><span class="line">		return &#123;</span><br><span class="line">			flag: true</span><br><span class="line">		&#125;;</span><br><span class="line">	&#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>因为v-if是一个指令，所以必须将它绑定到一个元素上，但如果想切换多个元素呢？可以将一个&lt;template&gt;当做不可见的包裹元素，并在上面使用v-if。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;template v-if=&quot;flag&quot;&gt;</span><br><span class="line">	&lt;h1&gt;长恨歌&lt;/h1&gt;</span><br><span class="line">	&lt;p&gt;在天愿作比翼鸟&lt;/p&gt;</span><br><span class="line">	&lt;p&gt;在地愿为连理枝&lt;/p&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<h3 id="v-if…v-else"><a href="#v-if…v-else" class="headerlink" title="v-if…v-else"></a>v-if…v-else</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;div v-if=&quot;Math.random() &gt; 0.5&quot;&gt;</span><br><span class="line">	我买大</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;div v-else&gt;</span><br><span class="line">	我押小</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<h3 id="v-else-if"><a href="#v-else-if" class="headerlink" title="v-else-if"></a>v-else-if</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;div v-if=&quot;type === &#x27;red&#x27;&quot;&gt;</span><br><span class="line">	红</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;div v-else-if=&quot;type === &#x27;orange&#x27;&quot;&gt;</span><br><span class="line">	橙</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;div v-else-if=&quot;type === &#x27;yellow&#x27;&quot;&gt;</span><br><span class="line">	黄</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;div v-else&gt;</span><br><span class="line">	其它</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<h3 id="v-show"><a href="#v-show" class="headerlink" title="v-show"></a>v-show</h3><p>其用法大概与v-if一样，不同的是带有v-show的元素始终会被渲染并保留在DOM中。v-show只是简单地切换元素的CSS property display。</p>
<p>v-show不支持&lt;template&gt;，也不支持v-else。</p>
<p>v-if有更高的切换开销，v-show有更高的初始渲染开销。</p>
<p>未完待续…</p>
<h2 id="在模板中使用JavaScript表达式"><a href="#在模板中使用JavaScript表达式" class="headerlink" title="在模板中使用JavaScript表达式"></a>在模板中使用JavaScript表达式</h2><p>对于所有的数据绑定，Vue都提供了完全的JavaScript表达式支持。</p>
<p>但每个绑定都只能包含单个表达式。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;!-- JavaScript 表达式 --&gt;</span><br><span class="line">&lt;div&gt;&#123;&#123; age + 1 &#125;&#125;&lt;/div&gt;</span><br><span class="line">&lt;div&gt;&#123;&#123; isSuccess ? &#x27;兼济天下&#x27; : &#x27;独善其身&#x27; &#125;&#125;&lt;/div&gt;</span><br><span class="line">&lt;div&gt;&#123;&#123; message.split(&#x27;&#x27;).reverse().join(&#x27;&#x27;) &#125;&#125;&lt;/div&gt;</span><br><span class="line">&lt;div v-bind:id=&quot;&#x27;list-&#x27; + id&quot;&gt;&#123;&#123;&#x27;list-&#x27; + id&#125;&#125;&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 以下直接回报错 --&gt;</span><br><span class="line">&lt;!-- 这是语句，不是表达式 --&gt;</span><br><span class="line">&lt;!-- &#123;&#123; var age = 1 &#125;&#125; --&gt;</span><br><span class="line">&lt;!-- 流控制也不会生效，请使用三元表达式 --&gt;</span><br><span class="line">&lt;!-- &#123;&#123; if (isSuccess) &#123; return message &#125; &#125;&#125; --&gt;</span><br><span class="line"></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">    data()&#123;</span><br><span class="line">        return &#123;</span><br><span class="line">            age:16,</span><br><span class="line">            isSuccess:true,</span><br><span class="line">            message:&#x27;心清可品茶&#x27;,</span><br><span class="line">            id:1,</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h2 id="计算属性"><a href="#计算属性" class="headerlink" title="计算属性"></a>计算属性</h2><p>在模板中使用表达式非常便利，但它们只应该用于简单的操作。模板是为了描述视图的结构，在模板中加入大量的逻辑会让模板变得过重而难以维护。这就是为什么Vue将绑定表达式限制为一个表达式的原因。如果需要多于一个表达式的逻辑，应该使用计算属性。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">	&lt;div v-text=&quot;reversedMessage&quot;&gt;&lt;/div&gt;</span><br><span class="line">	&lt;button @click=&quot;setMsg()&quot;&gt;改变数据&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">	data() &#123;</span><br><span class="line">		return &#123;</span><br><span class="line">			message: &quot;僧游云隐寺&quot;,</span><br><span class="line">			userName: &quot;&quot;,</span><br><span class="line">			nickName: &quot;&quot;,</span><br><span class="line">		&#125;;</span><br><span class="line">	&#125;,</span><br><span class="line">	computed: &#123;</span><br><span class="line">		// 计算属性的 getter</span><br><span class="line">		reversedMessage: function() &#123;</span><br><span class="line">			// `this` 指向 vm 实例</span><br><span class="line">			return this.message</span><br><span class="line">				.split(&quot;&quot;)</span><br><span class="line">				.reverse()</span><br><span class="line">				.join(&quot;&quot;);</span><br><span class="line">		&#125;,</span><br><span class="line">		methods: &#123;</span><br><span class="line">			setMsg() &#123;</span><br><span class="line">				this.message = &quot;晴晴雨雨时时好好奇奇&quot;;</span><br><span class="line">		&#125;,</span><br><span class="line">	&#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>可以像绑定普通property那样在模板中绑定计算属性。当vm.message发生改变时，所有依赖vm.reversedMessage的绑定也会更新。计算属性的getter函数是没有副作用的。</p>
<p>计算属性默认只有getter，不过在需要的时候也可以提供setter。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">	computed: &#123;</span><br><span class="line">		fullName: &#123;</span><br><span class="line">			// getter</span><br><span class="line">			get: function() &#123;</span><br><span class="line">				return this.userName + &quot;-&quot; + this.nickName;</span><br><span class="line">			&#125;,</span><br><span class="line">			// setter</span><br><span class="line">			set: function(newValue) &#123;</span><br><span class="line">				const names = newValue.split(&quot; &quot;);</span><br><span class="line">				this.userName = names[0];</span><br><span class="line">				this.nickName = names[names.length - 1];</span><br><span class="line">			&#125;,</span><br><span class="line">		&#125;,</span><br><span class="line">	&#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h2 id="watch"><a href="#watch" class="headerlink" title="watch"></a>watch</h2><p>在Vue中，使用watch可监听响应数据的变化。虽然计算属性在大多数情况下更合适，但有时也需要一个自定义的侦听器。它的用法大体有三种</p>
<h3 id="常规用法"><a href="#常规用法" class="headerlink" title="常规用法"></a>常规用法</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">	&lt;input type=&quot;text&quot; v-model=&quot;name&quot; /&gt;</span><br><span class="line">	&lt;button @click=&quot;name = &#x27;小B&#x27;&quot;&gt;换人&lt;/button&gt;</span><br><span class="line">	&lt;div&gt;&#123;&#123; msg &#125;&#125;&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">	data() &#123;</span><br><span class="line">		return &#123;</span><br><span class="line">			name: &quot;小A&quot;,</span><br><span class="line">			msg: &quot;&quot;,</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;,</span><br><span class="line">	watch: &#123;</span><br><span class="line">		/**</span><br><span class="line">		* newVal:新值</span><br><span class="line">		* oldVal:旧值</span><br><span class="line">		*/</span><br><span class="line">		name(newVal, oldVal) &#123;</span><br><span class="line">			this.msg = &quot;之前是&quot; + oldVal;</span><br><span class="line">			this.msg += &quot;现在是&quot; + newVal;</span><br><span class="line">		&#125;,</span><br><span class="line">	&#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="立即执行"><a href="#立即执行" class="headerlink" title="立即执行"></a>立即执行</h3><p>常规用法中，当值第一次绑定时，不会执行监听函数，只有值改变时才会执行。</p>
<p>如果需要在最初绑定值的时候也执行函数，需要用到immediate属性。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">name: &#123;</span><br><span class="line">	handler(newVal, oldVal) &#123;</span><br><span class="line">		this.msg = &quot;之前是&quot; + oldVal + &quot;在偷窥小龙女；&quot;;</span><br><span class="line">		this.msg += &quot;现在是&quot; + newVal + &quot;在偷窥小龙女&quot;;</span><br><span class="line">	&#125;,</span><br><span class="line">	immediate: true,</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<h3 id="深度监听"><a href="#深度监听" class="headerlink" title="深度监听"></a>深度监听</h3><p>当需要监听复杂数据类型（对象）的改变时，普通的watch方法无法监听到对象内部属性的改变，只有data中声明过或者父组件传递过来的props中的数据才能够监听到变化，此时就需要deep属性对对象进行深度监听。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">	&lt;input type=&quot;text&quot; v-model=&quot;user.skill&quot; /&gt;</span><br><span class="line">	&lt;button @click=&quot;user.skill = &#x27;Python&#x27;&quot;&gt;换语言&lt;/button&gt;</span><br><span class="line">	&lt;div&gt;&#123;&#123;remark&#125;&#125;&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">	data() &#123;</span><br><span class="line">		return &#123;</span><br><span class="line">			user: &#123;</span><br><span class="line">				skill: &quot;TypeScript&quot;,</span><br><span class="line">			&#125;,</span><br><span class="line">			remark:&#x27;&#x27;</span><br><span class="line">		&#125;;</span><br><span class="line">	&#125;,</span><br><span class="line">	watch: &#123;</span><br><span class="line">		user: &#123;</span><br><span class="line">			//只有一个参数的情况下表示newVal</span><br><span class="line">			handler(obj) &#123;</span><br><span class="line">				this.remark=obj.skill;</span><br><span class="line">			&#125;,</span><br><span class="line">			deep: true,</span><br><span class="line">			immediate: true,</span><br><span class="line">		&#125;,</span><br><span class="line">	&#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="computed与watch的区别"><a href="#computed与watch的区别" class="headerlink" title="computed与watch的区别"></a>computed与watch的区别</h3><p>计算属性computed有以下特性：</p>
<ol>
<li>支持缓存，只有依赖数据发生改变才会重新计算。</li>
<li>不支持异步。</li>
<li>如果一个属性是由其他属性计算而来，这个属性依赖其他属性，是一个多对一或者一对一的关系，一般用computed。</li>
<li>如果computed属性的属性值是函数，那么默认走get方法，当数据变化时，调用set方法。</li>
</ol>
<p>侦听属性watch有以下特性：</p>
<ol>
<li>不支持缓存，数据变化时会直接触发相应操作。</li>
<li>支持异步。</li>
<li>监听的函数接受两个参数，第一个参数是最新的值；第二个参数是输入之前的值。</li>
<li>当一个属性发生变化时，会引起一系列值的变化；是一个一对多的关系。</li>
<li>监听数据必须是data中声明过或者父组件传递过来props中的数据。</li>
</ol>
<h2 id="自定义组件使用v-model实现双向数据绑定"><a href="#自定义组件使用v-model实现双向数据绑定" class="headerlink" title="自定义组件使用v-model实现双向数据绑定"></a>自定义组件使用v-model实现双向数据绑定</h2><p>默认情况下，组件上的v-model把value作为prop属性值，把update:value作为事件名称，我们可以通过向v-model传递参数来修改这些名词。</p>
<p>父组件：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">	&lt;p&gt;&#123;&#123; skill &#125;&#125;&lt;/p&gt;</span><br><span class="line">	&lt;Child v-model:skill=&quot;skill&quot;&gt;&lt;/Child&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">  </span><br><span class="line">&lt;script&gt;</span><br><span class="line">import Child from &#x27;../components/ChildCompo&#x27;;</span><br><span class="line">export default &#123;</span><br><span class="line">	components: &#123;</span><br><span class="line">		Child,</span><br><span class="line">	&#125;,</span><br><span class="line">	data() &#123;</span><br><span class="line">		return &#123;</span><br><span class="line">			skill: &#x27;Vue&#x27;,</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;,</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>子组件：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">	&lt;h4&gt;&#123;&#123; skill &#125;&#125;&lt;/h4&gt;</span><br><span class="line">	&lt;input type=&quot;text&quot; :value=&quot;skill&quot; @input=&quot;$emit(&#x27;update:skill&#x27;, $event.target.value)&quot; /&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">  </span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">	props: &#123;</span><br><span class="line">		skill: &#123;</span><br><span class="line">			type: String</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h2 id="自定义组件slots"><a href="#自定义组件slots" class="headerlink" title="自定义组件slots"></a>自定义组件slots</h2><p>Vue实现了一套内容分发的API，这套API的设计灵感来自Web Components规范草案，将&lt;slot&gt;元素作为承载分发内容的出口。slot（插槽）就是子组件中提供给父组件使用的一个占位符，用&lt;slot&gt;&lt;&#x2F;slot&gt;表示，父组件可以在这个占位符中填充任何模板代码，填充内容会替换子组件的&lt;slot&gt;&lt;&#x2F;slot&gt;标签。</p>
<ol>
<li><p>自定义一个按钮子组件，这里我们使用匿名插槽：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;button class=&quot;primary&quot;&gt;</span><br><span class="line">        &lt;slot&gt;默认值&lt;/slot&gt;</span><br><span class="line">    &lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.primary &#123;</span><br><span class="line">    padding: 5px 10px;</span><br><span class="line">    background: lightblue;</span><br><span class="line">    color: #fff;</span><br><span class="line">    border: none;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>父组件调用这个子组件，在父组件中给这个占位符填充内容：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;b-btn&gt;登录&lt;/b-btn&gt;</span><br><span class="line">    &lt;b-btn&gt;&lt;i&gt;@&lt;/i&gt;注册&lt;/b-btn&gt;</span><br><span class="line">    &lt;b-btn&gt;&lt;/b-btn&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import MyButton from &#x27;@/components/MyButton.vue&#x27;;</span><br><span class="line">export default &#123;</span><br><span class="line">    components: &#123;</span><br><span class="line">        &#x27;b-btn&#x27;: MyButton</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">button &#123;</span><br><span class="line">    margin: 5px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>当我们需要在自定义组件中定义多个插槽时，可以给slot指定不同的名称，也就是具名插槽</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;slot name=&quot;icon&quot;&gt;&lt;/slot&gt;</span><br><span class="line"></span><br><span class="line">&lt;template v-slot:icon&gt;&lt;/template&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>slot-scope作用域插槽</p>
<p>带参数的插槽，子组件给父组件提供参数，该参数仅限插槽内使用。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;slot name=&quot;other&quot; :data=&quot;list&quot;&gt;&lt;/slot&gt;</span><br><span class="line"></span><br><span class="line">&lt;template v-slot:other=&quot;list&quot;&gt;&lt;/template&gt;</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="非prop的attribute继承"><a href="#非prop的attribute继承" class="headerlink" title="非prop的attribute继承"></a>非prop的attribute继承</h2><p>一个非prop的attribute是指传向一个组件，但是该组件并没有相应的props或emits定义的attribute，常见的示例包括class、style、id属性。</p>
<h3 id="attribute继承"><a href="#attribute继承" class="headerlink" title="attribute继承"></a>attribute继承</h3><p>当组件返回单个根节点时，非prop的attribute将自动添加到根节点的attribute中。也就是说，根节点会自动继承非prop的attribute。</p>
<h3 id="禁用attribute继承"><a href="#禁用attribute继承" class="headerlink" title="禁用attribute继承"></a>禁用attribute继承</h3><p>如果不希望组件的根元素继承attribute，可以在组件的选项中设置inheritAttrs: false。</p>
<p>禁用attribute继承的常见场景是需要将attribute应用于根节点之外的其他元素，通过组件的选项中设置inheritAttrs: false，你可以访问组价的$attrs属性，该属性包括组件props和emits属性中未包含的所有属性（例如：class、style、v-on监听器等）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">    inheritAttrs: false</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>注意，如果子组件当中存在多个根节点，不显式绑定$attrs的话，将会发出运行时警告。</p>
<h2 id="ref-操作DOM"><a href="#ref-操作DOM" class="headerlink" title="$ref 操作DOM"></a>$ref 操作DOM</h2><p>ref用来给DOM元素或子组件注册引用信息，引用信息会根据父组件的$refs对象进行注册。通俗的理解就是通过vm.$ref父组件可以直接引用子组件对象，自然也可以直接调用子组件当中的属性和方法。</p>
<p>通过ref&#x3D;”名称”可以给需要操作的目标添加事件，或者获取自定义的data属性，ref常用场景包括：页面加载后，文本框自动聚焦。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div @click=&quot;getInfo&quot; ref=&quot;divObj&quot; data-name=&quot;Vue&quot;&gt;</span><br><span class="line">        &lt;span&gt;点击获取数据&lt;/span&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;input type=&quot;text&quot; ref=&quot;input&quot; /&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">    data() &#123;</span><br><span class="line"></span><br><span class="line">    &#125;,</span><br><span class="line">    mounted() &#123;</span><br><span class="line">        this.$nextTick(() =&gt; &#123;</span><br><span class="line">            this.$refs.input.focus();</span><br><span class="line">            this.$refs.divObj.onmouseover = () =&gt; &#123;</span><br><span class="line">                console.log(&quot;鼠标进入了&quot;, this.$refs.divObj);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">        getInfo() &#123;</span><br><span class="line">            console.log(this.$refs.divObj.dataset.name);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h2 id="组件传值"><a href="#组件传值" class="headerlink" title="组件传值"></a>组件传值</h2><h3 id="父组件传子组件"><a href="#父组件传子组件" class="headerlink" title="父组件传子组件"></a>父组件传子组件</h3><p>定义子组件：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;h3&gt;JS的超集是: &#123;&#123; parentName &#125;&#125;,&lt;/h3&gt;</span><br><span class="line">    &lt;h3&gt;它的数据类型有: &#123;&#123; dataType &#125;&#125;&lt;/h3&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">    props: [&quot;parentName&quot;, &quot;dataType&quot;],</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>props的类型可以是一个字符串数组，但如果希望每个prop都有指定的值类型，可以以对象形式列出prop：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">props: &#123;</span><br><span class="line">    parentName: String,</span><br><span class="line">    dataType: Array</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>当父组件没有设置需要传递过来的属性值时，还可以通过default给props中的属性指定一个默认值，此时props中的属性值是一个对象。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">props: &#123;</span><br><span class="line">    parentName: &#123;</span><br><span class="line">        type: String,</span><br><span class="line">        default: &quot;&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    dataType: &#123;</span><br><span class="line">        type: Array,</span><br><span class="line">        default: () =&gt; &#123;</span><br><span class="line">            return [];</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p>type可以是以下原生构造函数中的一个：String、Number、Boolean、Array、Object、Date、Function、Symbol。</p>
<p>父组件：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;SonComp :parentName=&quot;name&quot; :dataType=&quot;dtype&quot;&gt;&lt;/SonComp&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import SonComp from &#x27;@/components/SonComp.vue&#x27;</span><br><span class="line">export default &#123;</span><br><span class="line">    components: &#123;</span><br><span class="line">        SonComp</span><br><span class="line">    &#125;,</span><br><span class="line">    data()&#123;</span><br><span class="line">        return &#123;</span><br><span class="line">            name: &quot;TypeScript&quot;,</span><br><span class="line">            dtype: [&quot;String&quot;, &quot;Integer&quot;, &quot;Array&quot;]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>一定要使用props属性来定义父组件传递过来的数据。子组件中默认无法访问到父组件中的data上的数据和methods中的方法。</p>
<p>子组件中的data数据并不是通过父组件传递过来的，而是自身私有的，data上的数据都是可读可写的。</p>
<p>组件中的所有props中的数据都是通过父组件传递给子组件的，props中的数据都是只读的，无法重新赋值。把父组件传递过来的属性先在props中定义一下，这样才能使用这个数据。</p>
<h3 id="子组件传父组件"><a href="#子组件传父组件" class="headerlink" title="子组件传父组件"></a>子组件传父组件</h3><p>原理：父组件将方法的引用传递到子组件内部，子组件在内部调用父组件传递过来的方法，同时把要发送给父组件的数据在调用方法的时候当做参数传递进去。</p>
<p>父组件：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;SonComp @func=&quot;show&quot;&gt;&lt;/SonComp&gt;</span><br><span class="line">    &lt;div class=&quot;parent&quot;&gt;</span><br><span class="line">        &lt;span v-if=&quot;dataForm.name&quot;&gt;</span><br><span class="line">            语言：&#123;&#123; dataForm.name &#125;&#125;, 名字长度：&#123;&#123; dataForm.length &#125;&#125;</span><br><span class="line">        &lt;/span&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import SonComp from &#x27;./SonComp.vue&#x27;;</span><br><span class="line">export default &#123;</span><br><span class="line">    components: &#123;</span><br><span class="line">        SonComp</span><br><span class="line">    &#125;,</span><br><span class="line">    data() &#123;</span><br><span class="line">        return &#123;</span><br><span class="line">            dataForm: &#123;&#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">        show(data) &#123;</span><br><span class="line">            this.dataForm = data;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>子组件：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div class=&quot;lang&quot;&gt;&lt;input type=&quot;button&quot; value=&quot;换语言&quot; @click=&quot;myclick&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">    data() &#123;</span><br><span class="line">        return &#123;</span><br><span class="line">            langMsg: &#123; name: &quot;Python&quot;, length: 6 &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">        myclick() &#123;</span><br><span class="line">            this.$emit(&quot;func&quot;, this.langMsg)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>子组件内部通过this.$emit(“方法名”, 要传递的数据)方式，来调用父组件传递过来的方法，同时把数据传递给父组件使用。</p>
<p>组件之间的通信还可以通过使用Vuex、EventBus、localStorage、sessionStorage、cookie等。</p>
<h2 id="root-和-parent-的使用"><a href="#root-和-parent-的使用" class="headerlink" title="$root 和 $parent 的使用"></a>$root 和 $parent 的使用</h2><p>通常不建议通过子组件访问父组件的属性和方法，因为这样会破坏组件的封闭性。但是是可以做到的，可通过vm.$parent来引用父组件对象，然后就可以调用父组件的属性和方法了。</p>
<p>通过调用vm.$root，子组件可以访问根组件对象。</p>
<p>注：vm表示View Model（视图模型），其实就是new Vue( )对象。</p>
<p>this.$parent可以级联调用，如：this.$parent.$parent</p>
<h2 id="this-nextTick"><a href="#this-nextTick" class="headerlink" title="this.$nextTick"></a>this.$nextTick</h2><p>this.$nextTick将回调延迟到下次DOM更新循环后执行。在修改数据后立刻使用它，然后等待DOM更新。</p>
<p>在Vue中，当修改了data中的某个值，并不会立即反映到DOM页面中。Vue将对data的更改放入watcher的一个队列中，只有在当前任务空闲的时候才会执行。当执行到$nextTick时，这也是一个异步事件，会被放到一个队列当中，新添加的事件会被放在队列末尾，这样就一定能获取到DOM的更新数据。</p>
<h2 id="axios介绍"><a href="#axios介绍" class="headerlink" title="axios介绍"></a>axios介绍</h2><p>axios是一个基于Promise的HTTP库，可以用在浏览器和Node.js中。它有以下几个特性：</p>
<ul>
<li>从浏览器中创建XMLHttpRequests。</li>
<li>从Node.js中创建HTTP请求。</li>
<li>支持Promise API。</li>
<li>拦截请求和响应。</li>
<li>转换请求数据和响应数据。</li>
<li>取消请求。</li>
<li>自动转换JSON数据。</li>
<li>客户端支持防御XSRF。</li>
</ul>
<p>例如，执行GET请求：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&quot;axios&quot;</span>;</span><br><span class="line"></span><br><span class="line">axios.get(<span class="string">&quot;/user&quot;</span>, &#123;</span><br><span class="line">    <span class="attr">params</span>: &#123;</span><br><span class="line">        <span class="attr">ID</span>: <span class="number">1127</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">    .then(<span class="function"><span class="keyword">function</span> (<span class="params">response</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(response);</span><br><span class="line">    &#125;)</span><br><span class="line">    .catch(<span class="function"><span class="keyword">function</span> (<span class="params">error</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(error);</span><br><span class="line">    &#125;)</span><br></pre></td></tr></table></figure>

<p>在实际工作中，通常把axios的操作进行统一封装，因为我们发送的所有请求可能都要带上token进行权限验证。可以添加统一的请求过滤器，把token带上，还可以添加响应过滤器。当接受到不同的响应码时，统一进行处理。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&quot;axios&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> service = axios.create(&#123;</span><br><span class="line">    <span class="attr">baseURL</span>: <span class="string">&#x27;/api&#x27;</span>,</span><br><span class="line">    <span class="attr">timeout</span>: <span class="number">5000</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">service.interceptors.request.use(</span><br><span class="line">    <span class="function"><span class="params">config</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">localStorage</span>.getItem(<span class="string">&quot;$token&quot;</span>)) &#123;</span><br><span class="line">            config.headers[<span class="string">&#x27;X-Token&#x27;</span>] = <span class="built_in">localStorage</span>.getItem(<span class="string">&quot;$token&quot;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> config</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">Promise</span>.reject(error)</span><br><span class="line">    &#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">service.interceptors.response.use(</span><br><span class="line">    <span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> res = response.data</span><br><span class="line">        <span class="keyword">if</span> (res.Status !== <span class="string">&#x27;200&#x27;</span>) &#123;</span><br><span class="line">            <span class="built_in">this</span>.$message(&#123;</span><br><span class="line">                <span class="attr">message</span>: res.message,</span><br><span class="line">                <span class="attr">type</span>: <span class="string">&#x27;error&#x27;</span>,</span><br><span class="line">                <span class="attr">duration</span>: <span class="number">5</span> * <span class="number">1000</span></span><br><span class="line">            &#125;)</span><br><span class="line">            <span class="keyword">if</span> (res.Status === <span class="string">&#x27;401&#x27;</span> || res.Status === <span class="string">&#x27;402&#x27;</span>) &#123;</span><br><span class="line">                <span class="comment">//退出登录</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(<span class="string">&#x27;error&#x27;</span>)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> response.data</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;err&#x27;</span> + error)</span><br><span class="line">        <span class="built_in">this</span>.$message(&#123;</span><br><span class="line">            <span class="attr">message</span>: error.message,</span><br><span class="line">            <span class="attr">type</span>: <span class="string">&#x27;error&#x27;</span>,</span><br><span class="line">            <span class="attr">duration</span>: <span class="number">5</span> * <span class="number">1000</span></span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(<span class="string">&#x27;error&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> service</span><br></pre></td></tr></table></figure>

<p>除了axios，还有一个fetch也可以用于http请求封装，但是实际工作中fetch用的较少。</p>
<h2 id="跨域请求"><a href="#跨域请求" class="headerlink" title="跨域请求"></a>跨域请求</h2><p>浏览器具有安全限制，不允许AJAX访问协议不同、域名不同、端口号不同的数据接口，因为浏览器认为这种访问不安全，而在实际工作中，无可避免会遇到跨域问题。目前实现跨域的最常用方式有如下几种：</p>
<ul>
<li>JSONP</li>
<li>代理</li>
<li>后端接口跨域支持</li>
</ul>
<h3 id="JSONP实现原理"><a href="#JSONP实现原理" class="headerlink" title="JSONP实现原理"></a>JSONP实现原理</h3><p>可以通过动态创建script标签的形式，把script标签的src属性指向数据接口的地址，因为script标签不存在跨域限制。（根据其原理可知JSONP只支持Get请求，所以实际开发中并不常用。）</p>
<h3 id="代理"><a href="#代理" class="headerlink" title="代理"></a>代理</h3><p>axios支持代理配置，可以通过设置代理来防止跨域问题。通常在代码中对axios进行全局代理配置，当发布到生产服务器时，在通过Nginx进行请求转发，这样前端代码和后端接口就可以部署在不同的服务器上，也不会产生跨域问题。</p>
<p>开发环境的代理配置：</p>
<p>在vue.config.js中添加如下配置</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="attr">devServer</span>: &#123;</span><br><span class="line">    <span class="attr">port</span>: <span class="number">8888</span>,</span><br><span class="line">    <span class="attr">proxy</span>: &#123;</span><br><span class="line">      <span class="string">&quot;/api&quot;</span>: &#123;</span><br><span class="line">        <span class="comment">//本地服务接口地址</span></span><br><span class="line">        <span class="attr">target</span>: <span class="string">&quot;http://10.200.1.200:8888&quot;</span>, <span class="comment">//开发环境下后端接口地址</span></span><br><span class="line">        <span class="attr">ws</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">pathRewrite</span>: &#123;</span><br><span class="line">          <span class="string">&quot;^/api&quot;</span>: <span class="string">&quot;/&quot;</span>,</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这样的话，每一个请求后台的路径前都要加一个&#x2F;api。</p>
<p>生产环境需要修改Nginx代理配置文件nginx.conf。</p>
<h3 id="后端接口跨域支持"><a href="#后端接口跨域支持" class="headerlink" title="后端接口跨域支持"></a>后端接口跨域支持</h3><p>后端程序员通过过滤器对接口请求进行配置，从而准许接口能够被跨域访问。</p>
<h2 id="extend、mixin和extends"><a href="#extend、mixin和extends" class="headerlink" title="extend、mixin和extends"></a>extend、mixin和extends</h2><p>Vue.extend只是创建一个构造器，它是为了创建可复用的组件，参数是一个包含组件选项的对象。当我们调用Vue.component(‘a’, {…})时会自动调用Vue.extent。</p>
<p>Vue.component是用来注册或获取全局组件的方法，其作用是通过Vue.extend生成的扩展实例构造器注册（命名）为一个组件。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">// Vue.extend</span><br><span class="line">// 创建构造器</span><br><span class="line">var Profile = Vue.extend(&#123;</span><br><span class="line">  template: &quot;&lt;p&gt;&#123;&#123;firstName&#125;&#125;-&#123;&#123;lastName&#125;&#125;-&#123;&#123;alias&#125;&#125;&lt;/p&gt;&quot;,</span><br><span class="line">  data: function() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      userName: &quot;文泰来&quot;,</span><br><span class="line">      nickName: &quot;奔雷手&quot;,</span><br><span class="line">      skill: &quot;奔雷掌&quot;,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br><span class="line">// 创建 Profile 实例，并挂载到一个元素上。</span><br><span class="line">new Profile().$mount(&quot;#myApp&quot;);</span><br><span class="line">//注册人一个全局组件</span><br><span class="line">Vue.component(&#x27;global-component&#x27;, Profile);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>extends允许声明扩展另一个组件，而无需使用Vue.extend。主要是为了便于扩展单文件组件。</p>
<p>mixins选项接受一个混入对象的数组。这些混入实例对象可以像正常的实例对象一样包含选项。</p>
<p>代码执行优先级：extend &gt; extends &gt; mixins。</p>
<h1 id="Composition-API"><a href="#Composition-API" class="headerlink" title="Composition API"></a>Composition API</h1><p>Vue3与Vue2之间最大的不同之处在于新增了Composition API。</p>
<h2 id="Vue3集成TypeScript"><a href="#Vue3集成TypeScript" class="headerlink" title="Vue3集成TypeScript"></a>Vue3集成TypeScript</h2><p>在所有.vue文件中，script标签中添加lang&#x3D;”ts”属性就可以在&lt;script&gt;中使用TS的语法了。若要使用scss，则需要安装相关的loader：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn sass-loader node-sass-D</span><br></pre></td></tr></table></figure>

<h2 id="setup"><a href="#setup" class="headerlink" title="setup"></a>setup</h2><p>setup函数是处于生命周期函数beforeCreate之前的函数，新的option、所有的组合API函数都可以在此使用，并且只在初始化时执行一次。函数如果返回对象，对象中的属性或方法，模块中都可以直接使用。</p>
<h3 id="setup细节"><a href="#setup细节" class="headerlink" title="setup细节"></a>setup细节</h3><p>setup执行时机：</p>
<ol>
<li>在beforeCreate之前执行（一次），此时组件对象还没有创建。</li>
<li>在setup中，this是undefined，不能通过this来访问data&#x2F;computed&#x2F;methods&#x2F;props。</li>
<li>在所有的composition API相关回调函数中都不可以访问。</li>
</ol>
<p>setup的返回值：</p>
<ol>
<li>一般是一个对象，为模板提供数据，模板中可以直接使用此对象中所有方法&#x2F;属性。</li>
<li>返回对象中的属性会与data函数返回对象的属性合并成组件对象的属性。</li>
<li>返回对象中的方法会与methods中的方法合并成组件对象的方法。</li>
<li>如果有重名，setup优先。</li>
</ol>
<p>注意：一般不要混合使用setup、methods、data，因为methods中可以访问setup提供的属性和方法，但在setup中不能访问methods和data。</p>
<p>setup不能是一个async函数，因为返回值会是一个promise，模板看不到return对象中的属性数据。</p>
<p>setup的参数：</p>
<ol>
<li>setup(props, context) &#x2F; setup(props, {attrs, slots, emit})</li>
<li>props：包含props配置声明且传入了的所有属性的对象。</li>
<li>attrs：包含没有在props配置中声明的属性的对象，相当于this.$attrs。</li>
<li>slots：包含所有传入的插槽内容的对象，相当于this.$slots。</li>
<li>emit：用来分发自定义事件的函数，相当于this.$emit。</li>
</ol>
<h3 id="props和attrs的区别"><a href="#props和attrs的区别" class="headerlink" title="props和attrs的区别"></a>props和attrs的区别</h3><ol>
<li>props要先声明才能取值，attrs不用先声明。</li>
<li>props声明过的属性，attrs里不会再出现。</li>
<li>props不包含事件，attrs包含事件。</li>
<li>props支持string以外的类型，attrs只有string类型。</li>
</ol>
<h3 id="ref"><a href="#ref" class="headerlink" title="ref"></a>ref</h3><p>作用：定义一个数据的响应式</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">const xx = ref(initValue)</span><br></pre></td></tr></table></figure>

<p>创建一个包含响应式数据的引用对象，js中操作数据要xx.value，模板中操作不需要，一般用来定义一个基本类型的响应式数据。</p>
<p>响应式数据：数据变化页面跟着渲染变化。</p>
<h2 id="reactive"><a href="#reactive" class="headerlink" title="reactive"></a>reactive</h2><p>作用：定义多个数据的响应式（对象）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">const proxy = reactive(obj)</span><br></pre></td></tr></table></figure>

<p>响应式转换是深层的，它会影响对象内部所有嵌套对象的属性。</p>
<h2 id="ref和reactive的区别"><a href="#ref和reactive的区别" class="headerlink" title="ref和reactive的区别"></a>ref和reactive的区别</h2><p>ref用来处理基本类型数据，reactive用来处理对象。ref内部通过给value添加getter&#x2F;setter来实现对数据的劫持，reactive内部通过使用Proxy来实现对对象内部所有数据的劫持，并通过Reflect操作对象内部数据。</p>
<h2 id="计算属性和监视"><a href="#计算属性和监视" class="headerlink" title="计算属性和监视"></a>计算属性和监视</h2><p>computed函数：与computed配置功能一致，可以只有getter，也可以同时有getter和setter。</p>
<p>watch函数：与watch配置功能一致，监视指定的一个或多个响应式数据，一旦数据变化，就自动执行监视回调。默认初始不执行回调，但可以通过配置immediate为true来指定初始时立即执行第一次，通过配置deep为true，可以指定深度监视。</p>
<p>watchEffect函数：不用指定要监视的数据，回调函数中使用了哪些响应式数据就监视哪些。默认初始时执行第一次。</p>
<p>watchEffect与watch的区别：</p>
<ol>
<li>watchEffect不需要手动传入依赖</li>
<li>watchEffect每次初始化时会执行一次回调函数来自动获取依赖</li>
<li>watchEffect无法获取到原值，只能得到变化后的值</li>
</ol>
<h2 id="组件生命周期"><a href="#组件生命周期" class="headerlink" title="组件生命周期"></a>组件生命周期</h2><p><img src="https://s2.loli.net/2023/11/14/lZG4vVoN2B69FYh.png" alt="vue2.png"></p>
<h2 id="自定义hook函数"><a href="#自定义hook函数" class="headerlink" title="自定义hook函数"></a>自定义hook函数</h2><p>使用Vue3组合API封装的可复用的功能函数，优势是复用功能代码的来源清楚，更清晰易懂。</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; ref, onUnmounted, onMounted &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">useMousePosition</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> x = ref(-<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">const</span> y = ref(-<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">const</span> updatePosition = <span class="function">(<span class="params">e: MouseEvent</span>) =&gt;</span> &#123;</span><br><span class="line">        x.value = e.pageX</span><br><span class="line">        y.value = e.pageY</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    onMounted(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">document</span>.addEventListener(<span class="string">&#x27;click&#x27;</span>, updatePosition)</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    onUnmounted(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">document</span>.removeEventListener(<span class="string">&#x27;click&#x27;</span>, updatePosition)</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">return</span> &#123; x, y &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="toRefs"><a href="#toRefs" class="headerlink" title="toRefs"></a>toRefs</h2><p>把一个响应式对象转换成普通对象，该普通对象的每个property都是一个ref。</p>
<p>当从合成函数返回响应式对象时，toRefs非常有用。</p>
<h2 id="ref获取元素"><a href="#ref获取元素" class="headerlink" title="ref获取元素"></a>ref获取元素</h2><p>利用ref函数可以获取组件中的标签元素。</p>
<p>在Vue3中，我们声明一个ref的同名响应式属性并在setup中返回，这样这个响应式属性就是实际的DOM或者组件，注意取值时是inputRef.value。</p>
<h2 id="shallowReactive和shallowRef"><a href="#shallowReactive和shallowRef" class="headerlink" title="shallowReactive和shallowRef"></a>shallowReactive和shallowRef</h2><p>shallowReactive：只处理了对象内最外层属性的响应式（浅响应式）</p>
<p>shallowRef：只处理value的响应式，不进行对象的reactive处理。</p>
<p>什么时候使用浅响应式：</p>
<ol>
<li>一般情况使用ref和reactive即可</li>
<li>如果一个对象数据比较深，但变化时只是外层属性变化，可以使用shallowReactive</li>
<li>如果一个对象数据会被新产生的对象替换，可以使用shallowRef</li>
</ol>
<h2 id="readonly和shallowReadonly"><a href="#readonly和shallowReadonly" class="headerlink" title="readonly和shallowReadonly"></a>readonly和shallowReadonly</h2><p>readonly</p>
<ol>
<li>深度只读数据</li>
<li>获取一个对象或ref的只读代理</li>
<li>任何嵌套property也是只读的</li>
</ol>
<p>shallowReadonly：浅只读数据，只有自身的property只读。</p>
<h2 id="toRaw和markRaw"><a href="#toRaw和markRaw" class="headerlink" title="toRaw和markRaw"></a>toRaw和markRaw</h2><p>toRaw：返回由reactive或readonly方法转换成响应式代理的普通对象。这是一个还原方法，可用于临时读取，访问不会被代理&#x2F;跟踪，写入时也不会触发界面更新。</p>
<p>markRaw：标记一个对象，使其永远不会转换为代理，而是返回对象本身。</p>
<p>应用场景：</p>
<ol>
<li>有些值不应被设置为响应式的，例如复杂的第三方类实例或Vue组件对象。</li>
<li>当渲染具有不可变数据源的大列表时，跳过代理转换可以提高性能。</li>
</ol>
<h2 id="toRef、unRef、customRef"><a href="#toRef、unRef、customRef" class="headerlink" title="toRef、unRef、customRef"></a>toRef、unRef、customRef</h2><p>为原响应式对象上的某个属性创建一个ref对象，二者内部操作的是同一个数据值，更新时二者是同步的。</p>
<p>ref：拷贝了一份新的数据值单独操作，更新时互不影响。</p>
<p>unRef：如果参数是ref属性，则返回它的值，否则返回本身。</p>
<p>customRef：用于创建一个自定义的ref对象，可以显式的控制其依赖跟踪和触发响应。它接受两个参数，分别是用于追踪的track和用于触发响应的trigger，并返回一个带有get和set属性的对象。</p>
<h2 id="provide和inject，响应式数据判断"><a href="#provide和inject，响应式数据判断" class="headerlink" title="provide和inject，响应式数据判断"></a>provide和inject，响应式数据判断</h2><p>Vue的$parent属性可以让子组件访问父组件，但孙组件访问祖先组件就比较困难。provide和inject提供依赖注入。provide和inject是成对出现的，在主组件中通过provide提供数据和方法，在下级组件中通过inject调用主组件提供的数据和方法。</p>
<p>响应式数据判断：isRef、isReactive、isReadonly、isProxy</p>
<h1 id="Vue3新组件和新API"><a href="#Vue3新组件和新API" class="headerlink" title="Vue3新组件和新API"></a>Vue3新组件和新API</h1><h2 id="Fragment（片段）"><a href="#Fragment（片段）" class="headerlink" title="Fragment（片段）"></a>Fragment（片段）</h2><p>在Vue2中，组件必须有一个根标签。在3中可以没有。内部会将多个标签包含在一个虚拟的Fragment元素中，好处是减少标签层级，减小内存占用。Fragment是虚拟的，不会在DOM树中出现。</p>
<h2 id="Teleport（瞬移）"><a href="#Teleport（瞬移）" class="headerlink" title="Teleport（瞬移）"></a>Teleport（瞬移）</h2><p>Vue3.x中组件模板属于该组件自身，有时候我们想把模板的内容移动到当前组件之外的DOM中，这时就可以用Teleport。</p>
<h2 id="Suspense（不确定的）"><a href="#Suspense（不确定的）" class="headerlink" title="Suspense（不确定的）"></a>Suspense（不确定的）</h2><p>Suspense允许我们的应用程序在等待异步组件时渲染一些后备内容，创建一个平滑的用户体验。每当我们希望组件等待数据获取时（通常在异步API调用中），我们都可以制作异步组件，主要用于解决异步加载组件问题。</p>
<p>异步组件：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;h2&gt;AsyncComponent子级组件&lt;/h2&gt;</span><br><span class="line">    &lt;h3&gt;&#123;&#123; msg &#125;&#125;&lt;/h3&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; defineComponent, ref &#125; from &#x27;vue&#x27;</span><br><span class="line">export default defineComponent(&#123;</span><br><span class="line">    name: &#x27;AsyncComponent&#x27;,</span><br><span class="line">    setup() &#123;</span><br><span class="line">        return new Promise((resolve, reject) =&gt; &#123;</span><br><span class="line">            //模拟异步加载数据</span><br><span class="line">            setTimeout(() =&gt; &#123;</span><br><span class="line">                resolve(&#123;</span><br><span class="line">                    msg: &#x27;终于等到你&#x27;</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;, 2000)</span><br><span class="line">        &#125;).then((res: any) =&gt; &#123;</span><br><span class="line">            return &#123; msg: res.msg &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>引入异步组件：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div v-if=&quot;errMsg&quot;&gt; &#123;&#123; errMsg &#125;&#125; &lt;/div&gt;</span><br><span class="line">    &lt;Suspense&gt;</span><br><span class="line">        &lt;template v-slot:default&gt;</span><br><span class="line">            &lt;!--异步组件--&gt;</span><br><span class="line">            &lt;AsyncComponent&gt;&lt;/AsyncComponent&gt;</span><br><span class="line">        &lt;/template&gt;</span><br><span class="line">        &lt;template v-slot:fallback&gt;</span><br><span class="line">            &lt;!--loading的内容--&gt;</span><br><span class="line">            &lt;h2&gt;数据加载中.....&lt;/h2&gt;</span><br><span class="line">        &lt;/template&gt;</span><br><span class="line">    &lt;/Suspense&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">  </span><br><span class="line">&lt;script lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; onErrorCaptured, ref &#125; from &quot;vue&quot;;</span><br><span class="line">import &#123; defineComponent, defineAsyncComponent &#125; from &quot;vue&quot;;</span><br><span class="line">// Vue3中的动态引入组件的写法</span><br><span class="line">const AsyncComponent = defineAsyncComponent(</span><br><span class="line">    () =&gt; import(&quot;../components/AsyncComponent.vue&quot;)</span><br><span class="line">);</span><br><span class="line">// 静态引入组件</span><br><span class="line">// import AsyncComponent from &#x27;../components/AsyncComponent.vue&#x27;;</span><br><span class="line">export default defineComponent(&#123;</span><br><span class="line">    components: &#123;</span><br><span class="line">        AsyncComponent,</span><br><span class="line">    &#125;,</span><br><span class="line">    setup() &#123;</span><br><span class="line">        let errMsg = ref(&quot;&quot;);</span><br><span class="line">        onErrorCaptured((ex) =&gt; &#123;</span><br><span class="line">            errMsg.value = &quot;报错了&quot; + ex;</span><br><span class="line">            return true;</span><br><span class="line">        &#125;);</span><br><span class="line">        return &#123; errMsg &#125;;</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h2 id="全新的全局API"><a href="#全新的全局API" class="headerlink" title="全新的全局API"></a>全新的全局API</h2><h3 id="createAPP"><a href="#createAPP" class="headerlink" title="createAPP()"></a>createAPP()</h3><p>调用createApp会返回一个应用实例，应用实例会暴露当前全局API的子集。经验法则是：把所有全局改变Vue行为的API都移动到应用实例上。</p>
<p>可以在createApp之后链式调用其他方法。createApp函数接受一个根组件选项对象作为第一个参数：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">const app = Vue.createApp(&#123;</span><br><span class="line">	data() &#123;</span><br><span class="line">		return &#123;</span><br><span class="line"></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;,</span><br><span class="line">	methods: &#123;...&#125;,</span><br><span class="line">	computed: &#123;...&#125;</span><br><span class="line">	...</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>使用第二个参数，可以将根props传递给应用程序：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">const app = Vue.createApp(&#123;</span><br><span class="line">	&#123;</span><br><span class="line">		props: [&#x27;username&#x27;]</span><br><span class="line">	&#125;,</span><br><span class="line">	&#123;username: &#x27;XXX&#x27;&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="Vue3优先使用Proxy"><a href="#Vue3优先使用Proxy" class="headerlink" title="Vue3优先使用Proxy"></a>Vue3优先使用Proxy</h3><p>Vue3使用ES6的Proxy作为其观察者机制，取代之前的Object.defineProperty。</p>
<h3 id="defineComponent和defineAsyncComponent"><a href="#defineComponent和defineAsyncComponent" class="headerlink" title="defineComponent和defineAsyncComponent"></a>defineComponent和defineAsyncComponent</h3><p>defineComponent用于定义组件，只返回传递给它的对象，只是对setup进行封装，返回options的对象。其最重要的功能是在TS下给予了组件正确的参数类型推断。</p>
<p>defineAsyncComponent用于定义异步组件。</p>
<h3 id="nextTick"><a href="#nextTick" class="headerlink" title="nextTick()"></a>nextTick()</h3><p>Vue实现响应式并不是数据发生变化后DOM立即变化，而是按一定的策略进行DOM的更新。JS事件循环：JS的任务队列分为同步任务和异步任务，所有的同步任务都是在主线程中执行的。异步任务可能会在macrotask（宏任务）或者microtask（微任务）里面。</p>
<p>微任务是指在当前任务执行结束后立即执行的任务，它可以看作是在当前任务的“尾巴”添加的任务。常见的微任务包括 Promise 回调和 process.nextTick。 宏任务是指需要排队等待 JavaScript 引擎空闲时才能执行的任务。常见的宏任务包括 setTimeout、setInterval、I&#x2F;O 操作、DOM 事件等。 JavaScript 引擎会先执行当前任务中的所有微任务，然后再执行宏任务队列中的第一个任务。这个过程会不断重复，直到宏任务队列中的任务被全部执行完毕。</p>
<h3 id="将原来的全局API转移到应用对象"><a href="#将原来的全局API转移到应用对象" class="headerlink" title="将原来的全局API转移到应用对象"></a>将原来的全局API转移到应用对象</h3><p>以下对象都由原来的Vue.[方法名]改为了createApp(App).[方法名]</p>
<ol>
<li>component</li>
<li>config</li>
<li>directive</li>
<li>mount</li>
<li>unmount</li>
<li>use</li>
</ol>
<h3 id="v-if与v-for优先级"><a href="#v-if与v-for优先级" class="headerlink" title="v-if与v-for优先级"></a>v-if与v-for优先级</h3><p>在3.x版本中，v-if总是优先于v-for生效</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="http://sdupc.top">Chao Pang</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="http://sdupc.top/2023/08/19/vue3/">http://sdupc.top/2023/08/19/vue3/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://sdupc.top" target="_blank">Chao Pang的个人主页</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Vue3/">Vue3</a></div><div class="post_share"><div class="social-share" data-image="https://s2.loli.net/2023/10/21/g4juA53xnB2bEMT.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2023/09/03/SKF/" title="SKF实习经历小结"><img class="cover" src="https://s2.loli.net/2023/09/17/Q5cIYv2rBsZFSm9.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">SKF实习经历小结</div></div></a></div><div class="next-post pull-right"><a href="/2023/07/14/typescript/" title="TypeScript介绍"><img class="cover" src="https://s2.loli.net/2023/10/21/FgHzGVZtBkobiRJ.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">TypeScript介绍</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2023/11/04/vue_router_vuex/" title="Vue-router和vuex"><img class="cover" src="https://s2.loli.net/2023/11/14/n2Ns1YqXUZmVith.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-11-04</div><div class="title">Vue-router和vuex</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://i.loli.net/2021/11/29/nu4tpl8PIgFQBAr.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Chao Pang</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">29</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">23</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">7</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/Pang-chao"><i class="fab fa-github"></i><span>关注我</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/Pang-chao" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:pc@sdupc.top" target="_blank" title="Email"><i class="fas fa-envelope"></i></a><a class="social-icon" href="https://leetcode-cn.com/u/sdu-pc" target="_blank" title="Leetcode"><i class="fas fa-code"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">一个热爱古诗词和历史的 ISTJ ，欢迎来到我的个人主页~有任何问题都可以与我邮件交流！邮箱：pc@sdupc.top</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Vue3%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B"><span class="toc-number">1.</span> <span class="toc-text">Vue3快速上手</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AE%80%E4%BB%8B"><span class="toc-number">1.1.</span> <span class="toc-text">简介</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#vue-devtools"><span class="toc-number">1.1.1.</span> <span class="toc-text">vue-devtools</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BAVue3%E9%A1%B9%E7%9B%AE"><span class="toc-number">1.1.2.</span> <span class="toc-text">创建Vue3项目</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Vue%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4%E4%BB%8B%E7%BB%8D"><span class="toc-number">1.2.</span> <span class="toc-text">Vue常用指令介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#v-text"><span class="toc-number">1.2.1.</span> <span class="toc-text">v-text</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#v-model%E5%92%8Cv-bind"><span class="toc-number">1.2.2.</span> <span class="toc-text">v-model和v-bind</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#v-once"><span class="toc-number">1.2.3.</span> <span class="toc-text">v-once</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#v-cloak"><span class="toc-number">1.2.4.</span> <span class="toc-text">v-cloak</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#v-for%E5%92%8Ckey%E5%B1%9E%E6%80%A7"><span class="toc-number">1.2.5.</span> <span class="toc-text">v-for和key属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#v-on"><span class="toc-number">1.2.6.</span> <span class="toc-text">v-on</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9C%A8Vue%E4%B8%AD%E4%BD%BF%E7%94%A8%E6%A0%B7%E5%BC%8F"><span class="toc-number">1.3.</span> <span class="toc-text">在Vue中使用样式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8class%E6%A0%B7%E5%BC%8F"><span class="toc-number">1.3.1.</span> <span class="toc-text">使用class样式</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E5%86%85%E8%81%94%E6%A0%B7%E5%BC%8F"><span class="toc-number">1.4.</span> <span class="toc-text">使用内联样式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9D%A1%E4%BB%B6%E5%88%A4%E6%96%AD"><span class="toc-number">1.5.</span> <span class="toc-text">条件判断</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#v-if"><span class="toc-number">1.5.1.</span> <span class="toc-text">v-if</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#v-if%E2%80%A6v-else"><span class="toc-number">1.5.2.</span> <span class="toc-text">v-if…v-else</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#v-else-if"><span class="toc-number">1.5.3.</span> <span class="toc-text">v-else-if</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#v-show"><span class="toc-number">1.5.4.</span> <span class="toc-text">v-show</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9C%A8%E6%A8%A1%E6%9D%BF%E4%B8%AD%E4%BD%BF%E7%94%A8JavaScript%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">1.6.</span> <span class="toc-text">在模板中使用JavaScript表达式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7"><span class="toc-number">1.7.</span> <span class="toc-text">计算属性</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#watch"><span class="toc-number">1.8.</span> <span class="toc-text">watch</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%B8%E8%A7%84%E7%94%A8%E6%B3%95"><span class="toc-number">1.8.1.</span> <span class="toc-text">常规用法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AB%8B%E5%8D%B3%E6%89%A7%E8%A1%8C"><span class="toc-number">1.8.2.</span> <span class="toc-text">立即执行</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B7%B1%E5%BA%A6%E7%9B%91%E5%90%AC"><span class="toc-number">1.8.3.</span> <span class="toc-text">深度监听</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#computed%E4%B8%8Ewatch%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">1.8.4.</span> <span class="toc-text">computed与watch的区别</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E7%BB%84%E4%BB%B6%E4%BD%BF%E7%94%A8v-model%E5%AE%9E%E7%8E%B0%E5%8F%8C%E5%90%91%E6%95%B0%E6%8D%AE%E7%BB%91%E5%AE%9A"><span class="toc-number">1.9.</span> <span class="toc-text">自定义组件使用v-model实现双向数据绑定</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E7%BB%84%E4%BB%B6slots"><span class="toc-number">1.10.</span> <span class="toc-text">自定义组件slots</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%9D%9Eprop%E7%9A%84attribute%E7%BB%A7%E6%89%BF"><span class="toc-number">1.11.</span> <span class="toc-text">非prop的attribute继承</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#attribute%E7%BB%A7%E6%89%BF"><span class="toc-number">1.11.1.</span> <span class="toc-text">attribute继承</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A6%81%E7%94%A8attribute%E7%BB%A7%E6%89%BF"><span class="toc-number">1.11.2.</span> <span class="toc-text">禁用attribute继承</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ref-%E6%93%8D%E4%BD%9CDOM"><span class="toc-number">1.12.</span> <span class="toc-text">$ref 操作DOM</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%84%E4%BB%B6%E4%BC%A0%E5%80%BC"><span class="toc-number">1.13.</span> <span class="toc-text">组件传值</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%88%B6%E7%BB%84%E4%BB%B6%E4%BC%A0%E5%AD%90%E7%BB%84%E4%BB%B6"><span class="toc-number">1.13.1.</span> <span class="toc-text">父组件传子组件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%90%E7%BB%84%E4%BB%B6%E4%BC%A0%E7%88%B6%E7%BB%84%E4%BB%B6"><span class="toc-number">1.13.2.</span> <span class="toc-text">子组件传父组件</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#root-%E5%92%8C-parent-%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-number">1.14.</span> <span class="toc-text">$root 和 $parent 的使用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#this-nextTick"><span class="toc-number">1.15.</span> <span class="toc-text">this.$nextTick</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#axios%E4%BB%8B%E7%BB%8D"><span class="toc-number">1.16.</span> <span class="toc-text">axios介绍</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%B7%A8%E5%9F%9F%E8%AF%B7%E6%B1%82"><span class="toc-number">1.17.</span> <span class="toc-text">跨域请求</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#JSONP%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86"><span class="toc-number">1.17.1.</span> <span class="toc-text">JSONP实现原理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%A3%E7%90%86"><span class="toc-number">1.17.2.</span> <span class="toc-text">代理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%8E%E7%AB%AF%E6%8E%A5%E5%8F%A3%E8%B7%A8%E5%9F%9F%E6%94%AF%E6%8C%81"><span class="toc-number">1.17.3.</span> <span class="toc-text">后端接口跨域支持</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#extend%E3%80%81mixin%E5%92%8Cextends"><span class="toc-number">1.18.</span> <span class="toc-text">extend、mixin和extends</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Composition-API"><span class="toc-number">2.</span> <span class="toc-text">Composition API</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Vue3%E9%9B%86%E6%88%90TypeScript"><span class="toc-number">2.1.</span> <span class="toc-text">Vue3集成TypeScript</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#setup"><span class="toc-number">2.2.</span> <span class="toc-text">setup</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#setup%E7%BB%86%E8%8A%82"><span class="toc-number">2.2.1.</span> <span class="toc-text">setup细节</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#props%E5%92%8Cattrs%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">2.2.2.</span> <span class="toc-text">props和attrs的区别</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ref"><span class="toc-number">2.2.3.</span> <span class="toc-text">ref</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#reactive"><span class="toc-number">2.3.</span> <span class="toc-text">reactive</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ref%E5%92%8Creactive%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">2.4.</span> <span class="toc-text">ref和reactive的区别</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7%E5%92%8C%E7%9B%91%E8%A7%86"><span class="toc-number">2.5.</span> <span class="toc-text">计算属性和监视</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%84%E4%BB%B6%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-number">2.6.</span> <span class="toc-text">组件生命周期</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89hook%E5%87%BD%E6%95%B0"><span class="toc-number">2.7.</span> <span class="toc-text">自定义hook函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#toRefs"><span class="toc-number">2.8.</span> <span class="toc-text">toRefs</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ref%E8%8E%B7%E5%8F%96%E5%85%83%E7%B4%A0"><span class="toc-number">2.9.</span> <span class="toc-text">ref获取元素</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#shallowReactive%E5%92%8CshallowRef"><span class="toc-number">2.10.</span> <span class="toc-text">shallowReactive和shallowRef</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#readonly%E5%92%8CshallowReadonly"><span class="toc-number">2.11.</span> <span class="toc-text">readonly和shallowReadonly</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#toRaw%E5%92%8CmarkRaw"><span class="toc-number">2.12.</span> <span class="toc-text">toRaw和markRaw</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#toRef%E3%80%81unRef%E3%80%81customRef"><span class="toc-number">2.13.</span> <span class="toc-text">toRef、unRef、customRef</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#provide%E5%92%8Cinject%EF%BC%8C%E5%93%8D%E5%BA%94%E5%BC%8F%E6%95%B0%E6%8D%AE%E5%88%A4%E6%96%AD"><span class="toc-number">2.14.</span> <span class="toc-text">provide和inject，响应式数据判断</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Vue3%E6%96%B0%E7%BB%84%E4%BB%B6%E5%92%8C%E6%96%B0API"><span class="toc-number">3.</span> <span class="toc-text">Vue3新组件和新API</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Fragment%EF%BC%88%E7%89%87%E6%AE%B5%EF%BC%89"><span class="toc-number">3.1.</span> <span class="toc-text">Fragment（片段）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Teleport%EF%BC%88%E7%9E%AC%E7%A7%BB%EF%BC%89"><span class="toc-number">3.2.</span> <span class="toc-text">Teleport（瞬移）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Suspense%EF%BC%88%E4%B8%8D%E7%A1%AE%E5%AE%9A%E7%9A%84%EF%BC%89"><span class="toc-number">3.3.</span> <span class="toc-text">Suspense（不确定的）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%A8%E6%96%B0%E7%9A%84%E5%85%A8%E5%B1%80API"><span class="toc-number">3.4.</span> <span class="toc-text">全新的全局API</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#createAPP"><span class="toc-number">3.4.1.</span> <span class="toc-text">createAPP()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Vue3%E4%BC%98%E5%85%88%E4%BD%BF%E7%94%A8Proxy"><span class="toc-number">3.4.2.</span> <span class="toc-text">Vue3优先使用Proxy</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#defineComponent%E5%92%8CdefineAsyncComponent"><span class="toc-number">3.4.3.</span> <span class="toc-text">defineComponent和defineAsyncComponent</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#nextTick"><span class="toc-number">3.4.4.</span> <span class="toc-text">nextTick()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%86%E5%8E%9F%E6%9D%A5%E7%9A%84%E5%85%A8%E5%B1%80API%E8%BD%AC%E7%A7%BB%E5%88%B0%E5%BA%94%E7%94%A8%E5%AF%B9%E8%B1%A1"><span class="toc-number">3.4.5.</span> <span class="toc-text">将原来的全局API转移到应用对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#v-if%E4%B8%8Ev-for%E4%BC%98%E5%85%88%E7%BA%A7"><span class="toc-number">3.4.6.</span> <span class="toc-text">v-if与v-for优先级</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2024/07/06/dps/" title="数字信号处理"><img src="https://s2.loli.net/2024/07/06/KlhjmBI9UvkFCAx.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="数字信号处理"/></a><div class="content"><a class="title" href="/2024/07/06/dps/" title="数字信号处理">数字信号处理</a><time datetime="2024-07-06T07:17:56.000Z" title="发表于 2024-07-06 15:17:56">2024-07-06</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/03/28/software_design/" title="现代软件开发中的模式"><img src="https://s2.loli.net/2024/03/28/C79cXYjarenqxOo.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="现代软件开发中的模式"/></a><div class="content"><a class="title" href="/2024/03/28/software_design/" title="现代软件开发中的模式">现代软件开发中的模式</a><time datetime="2024-03-28T14:34:28.000Z" title="发表于 2024-03-28 22:34:28">2024-03-28</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/03/16/stream_output/" title="ChatGPT的流式输出"><img src="https://s2.loli.net/2024/03/19/uLRs8M3VjJtXbZk.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="ChatGPT的流式输出"/></a><div class="content"><a class="title" href="/2024/03/16/stream_output/" title="ChatGPT的流式输出">ChatGPT的流式输出</a><time datetime="2024-03-16T06:29:48.000Z" title="发表于 2024-03-16 14:29:48">2024-03-16</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/02/14/pep8/" title="Python编写规范PEP8"><img src="https://s2.loli.net/2023/11/21/Vs2j54JkSU6olAN.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Python编写规范PEP8"/></a><div class="content"><a class="title" href="/2024/02/14/pep8/" title="Python编写规范PEP8">Python编写规范PEP8</a><time datetime="2024-02-14T06:54:36.000Z" title="发表于 2024-02-14 14:54:36">2024-02-14</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/01/04/knowledge&amp;reasoning/" title="知识与推理"><img src="https://s2.loli.net/2024/01/07/rksO1omUKd9HABq.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="知识与推理"/></a><div class="content"><a class="title" href="/2024/01/04/knowledge&amp;reasoning/" title="知识与推理">知识与推理</a><time datetime="2024-01-04T02:14:57.000Z" title="发表于 2024-01-04 10:14:57">2024-01-04</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2024 By Chao Pang</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=4.13.0"></script><script src="/js/main.js?v=4.13.0"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"><script>(() => {
  const $mermaid = document.querySelectorAll('#article-container .mermaid-wrap')
  if ($mermaid.length === 0) return
  const runMermaid = () => {
    window.loadMermaid = true
    const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

    Array.from($mermaid).forEach((item, index) => {
      const mermaidSrc = item.firstElementChild
      const mermaidThemeConfig = '%%{init:{ \'theme\':\'' + theme + '\'}}%%\n'
      const mermaidID = 'mermaid-' + index
      const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent

      const renderFn = mermaid.render(mermaidID, mermaidDefinition)

      const renderV10 = () => {
        renderFn.then(({svg}) => {
          mermaidSrc.insertAdjacentHTML('afterend', svg)
        })
      }

      const renderV9 = svg => {
        mermaidSrc.insertAdjacentHTML('afterend', svg)
      }

      typeof renderFn === 'string' ? renderV9(renderFn) : renderV10()
    })
  }

  const loadMermaid = () => {
    window.loadMermaid ? runMermaid() : getScript('https://cdn.jsdelivr.net/npm/mermaid@10.8.0/dist/mermaid.min.js').then(runMermaid)
  }

  btf.addGlobalFn('themeChange', runMermaid, 'mermaid')

  window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
})()</script></div><script defer="defer" id="fluttering_ribbon" mobile="true" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/canvas-fluttering-ribbon.min.js"></script><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/click-heart.min.js" async="async" mobile="false"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>