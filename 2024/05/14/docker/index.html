<!DOCTYPE html><html class="hide-aside" lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Docker | Chao Pang的个人主页</title><meta name="author" content="Chao Pang"><meta name="copyright" content="Chao Pang"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="Docker大纲初级 Docker 概述 Docker 安装 Docker 命令 镜像命令 容器命令 操作命令    中级 Docker 镜像 容器数据卷 DockerFile 脚本 Docker 网络原理 IDE 整合 Docker  高级 Docker Compose Docker Swarm 持续集成与部署 Jekins  起步Docker 应用场景 容器化技术 系统级别虚拟化技术 轻便、容">
<meta property="og:type" content="article">
<meta property="og:title" content="Docker">
<meta property="og:url" content="http://sdupc.top/2024/05/14/docker/index.html">
<meta property="og:site_name" content="Chao Pang的个人主页">
<meta property="og:description" content="Docker大纲初级 Docker 概述 Docker 安装 Docker 命令 镜像命令 容器命令 操作命令    中级 Docker 镜像 容器数据卷 DockerFile 脚本 Docker 网络原理 IDE 整合 Docker  高级 Docker Compose Docker Swarm 持续集成与部署 Jekins  起步Docker 应用场景 容器化技术 系统级别虚拟化技术 轻便、容">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://s2.loli.net/2024/07/28/ZfVE1yXw3eO4tI5.png">
<meta property="article:published_time" content="2024-05-14T08:35:28.000Z">
<meta property="article:modified_time" content="2024-09-22T14:35:10.057Z">
<meta property="article:author" content="Chao Pang">
<meta property="article:tag" content="Docker">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://s2.loli.net/2024/07/28/ZfVE1yXw3eO4tI5.png"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://sdupc.top/2024/05/14/docker/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css?v=4.13.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.11.1/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Docker',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-09-22 22:35:10'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 5.4.2"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><script>(()=>{
  const $loadingBox = document.getElementById('loading-box')
  const $body = document.body
  const preloader = {
    endLoading: () => {
      $body.style.overflow = ''
      $loadingBox.classList.add('loaded')
    },
    initLoading: () => {
      $body.style.overflow = 'hidden'
      $loadingBox.classList.remove('loaded')
    }
  }

  preloader.initLoading()
  window.addEventListener('load',() => { preloader.endLoading() })

  if (false) {
    document.addEventListener('pjax:send', () => { preloader.initLoading() })
    document.addEventListener('pjax:complete', () => { preloader.endLoading() })
  }
})()</script><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://i.loli.net/2021/11/29/nu4tpl8PIgFQBAr.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">34</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">27</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">9</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于我</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://s2.loli.net/2024/07/28/ZfVE1yXw3eO4tI5.png')"><nav id="nav"><span id="blog-info"><a href="/" title="Chao Pang的个人主页"><span class="site-name">Chao Pang的个人主页</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于我</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Docker</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2024-05-14T08:35:28.000Z" title="发表于 2024-05-14 16:35:28">2024-05-14</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-09-22T14:35:10.057Z" title="更新于 2024-09-22 22:35:10">2024-09-22</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E8%BF%90%E7%BB%B4/">运维</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="Docker"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="Docker"><a href="#Docker" class="headerlink" title="Docker"></a>Docker</h1><h2 id="大纲"><a href="#大纲" class="headerlink" title="大纲"></a>大纲</h2><h3 id="初级"><a href="#初级" class="headerlink" title="初级"></a>初级</h3><ul>
<li>Docker 概述</li>
<li>Docker 安装</li>
<li>Docker 命令<ul>
<li>镜像命令</li>
<li>容器命令</li>
<li>操作命令</li>
</ul>
</li>
</ul>
<h3 id="中级"><a href="#中级" class="headerlink" title="中级"></a>中级</h3><ul>
<li>Docker 镜像</li>
<li>容器数据卷</li>
<li>DockerFile 脚本</li>
<li>Docker 网络原理</li>
<li>IDE 整合 Docker</li>
</ul>
<h3 id="高级"><a href="#高级" class="headerlink" title="高级"></a>高级</h3><ul>
<li>Docker Compose</li>
<li>Docker Swarm</li>
<li>持续集成与部署 Jekins</li>
</ul>
<h2 id="起步"><a href="#起步" class="headerlink" title="起步"></a>起步</h2><h3 id="Docker-应用场景"><a href="#Docker-应用场景" class="headerlink" title="Docker 应用场景"></a>Docker 应用场景</h3><ul>
<li>容器化技术</li>
<li>系统级别虚拟化技术</li>
<li>轻便、容器间隔离</li>
<li>DevOps</li>
<li>一键运行</li>
<li>打包镜像，发布</li>
<li>便捷升级和扩、缩容</li>
<li>高效的计算资源利用</li>
<li></li>
</ul>
<h3 id="文档"><a href="#文档" class="headerlink" title="文档"></a>文档</h3><p><a target="_blank" rel="noopener" href="https://docs.docker.com/">官方文档</a></p>
<h3 id="名词解释"><a href="#名词解释" class="headerlink" title="名词解释"></a>名词解释</h3><ol>
<li>镜像 <strong>image</strong>：类似于一个模板，可通过这个模板来创建容器服务，tomcat &#x3D;&gt; docker run &#x3D;&gt; tomcat 01 （容器服务）；通过这个镜像可重复创建多个容器。</li>
<li>容器 <strong>container</strong>：Docker 利用容器技术，独立运行一个或一组通过镜像来创建的应用。容器具备启动、停止、删除等的基本命令；可理解为简易的 Linux 系统。 </li>
<li>仓库 <strong>repository</strong>：存放镜像的地方。公有仓库：Docker Hub。国内访问需采取加速措施。</li>
</ol>
<h3 id="Debian-安装-Docker"><a href="#Debian-安装-Docker" class="headerlink" title="Debian 安装 Docker"></a><a target="_blank" rel="noopener" href="https://docs.docker.com/engine/install/debian/">Debian 安装 Docker</a></h3><h3 id="卸载-Docker"><a href="#卸载-Docker" class="headerlink" title="卸载 Docker"></a><a target="_blank" rel="noopener" href="https://docs.docker.com/engine/install/debian/#uninstall-docker-engine">卸载 Docker</a></h3><h2 id="Docker-原理"><a href="#Docker-原理" class="headerlink" title="Docker 原理"></a>Docker 原理</h2><p>C-S架构，容器之间互相隔离，通过 Socket 进行通信。</p>
<h3 id="Docker-快于-VM-的原理"><a href="#Docker-快于-VM-的原理" class="headerlink" title="Docker 快于 VM 的原理"></a>Docker 快于 VM 的原理</h3><ol>
<li>比 VM 更少的抽象层</li>
<li>docke 利用宿主机的内核， VM 需要 Guest OS</li>
</ol>
<h2 id="Docker-常用命令-Use-the-Docker-command-line-Docker-Documentation"><a href="#Docker-常用命令-Use-the-Docker-command-line-Docker-Documentation" class="headerlink" title="[Docker 常用命令](Use the Docker command line | Docker Documentation)"></a>[Docker 常用命令](<a target="_blank" rel="noopener" href="https://docs.docker.com/engine/reference/commandline/cli/">Use the Docker command line | Docker Documentation</a>)</h2><h3 id="帮助命令"><a href="#帮助命令" class="headerlink" title="帮助命令"></a>帮助命令</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">docker version	# docker 版本信息</span><br><span class="line">docker info		# 显示 docker 系统信息</span><br><span class="line">docker --help	# 帮助命令</span><br><span class="line">docker stats	# 查看 docker 资源占用情况命令</span><br><span class="line">docker system df # 查看镜像、容器、数据卷所占用的空间</span><br></pre></td></tr></table></figure>

<h3 id="镜像命令"><a href="#镜像命令" class="headerlink" title="镜像命令"></a>镜像命令</h3><h4 id="docker-images-展示镜像"><a href="#docker-images-展示镜像" class="headerlink" title="docker images 展示镜像"></a>docker images 展示镜像</h4><blockquote>
<p>‎默认值将显示所有顶级映像、其存储库和标记以及大小。‎<code>docker images</code></p>
<p>‎Docker 映像具有中间层，可提高可重用性、降低磁盘使用率，并通过允许缓存每个步骤来加快速度。默认情况下不显示这些中间层。‎<code>docker build</code></p>
<p>‎是图像及其所有父图像占用的累积空间。这也是映像时创建的 Tar 文件的内容所使用的磁盘空间。‎<code>SIZE``docker save</code></p>
<p>‎如果一个映像具有多个存储库名称或标记，则该映像将被多次列出。这个单一的图像（可以通过其匹配来识别）只用完了列出的一次。‎<code>IMAGE ID``SIZE</code></p>
</blockquote>
<h4 id="docker-search-搜索镜像"><a href="#docker-search-搜索镜像" class="headerlink" title="docker search 搜索镜像"></a>docker search 搜索镜像</h4><p>例如：<code>docker search mysql</code>。</p>
<h4 id="docker-pull-下载镜像-Docker-Hub-Container-Image-Library-App-Containerization"><a href="#docker-pull-下载镜像-Docker-Hub-Container-Image-Library-App-Containerization" class="headerlink" title="[docker pull 下载镜像](Docker Hub Container Image Library | App Containerization)"></a>[docker pull 下载镜像](<a target="_blank" rel="noopener" href="https://hub.docker.com/">Docker Hub Container Image Library | App Containerization</a>)</h4><p><code>docker pull [选项] [Docker Registry 地址[:端口号]/]仓库名[:标签]</code></p>
<p>不加 tag，默认下载 最新镜像.前往标题链接地址,确定适用版本.</p>
<h4 id="docker-rmi-删除镜像"><a href="#docker-rmi-删除镜像" class="headerlink" title="docker rmi 删除镜像"></a>docker rmi 删除镜像</h4><blockquote>
<p> docker remove image 的简写</p>
</blockquote>
<p> Options</p>
<table>
<thead>
<tr>
<th>‎名称，速记‎</th>
<th>‎Default</th>
<th>‎描述‎</th>
</tr>
</thead>
<tbody><tr>
<td><code>--force</code>‎,‎<code>-f</code></td>
<td></td>
<td>‎强制删除镜像‎</td>
</tr>
<tr>
<td><code>--no-prune</code></td>
<td></td>
<td>‎不要删除未标记的父项‎</td>
</tr>
</tbody></table>
<h4 id="docker-image-ls-列出镜像"><a href="#docker-image-ls-列出镜像" class="headerlink" title="docker image ls 列出镜像"></a>docker image ls 列出镜像</h4><p>列出已经下载下来的镜像，<code>docker image ls</code>。</p>
<h3 id="容器命令"><a href="#容器命令" class="headerlink" title="容器命令"></a>容器命令</h3><blockquote>
<p>有了镜像才能够创建容器</p>
</blockquote>
<h4 id="新建容器并启动"><a href="#新建容器并启动" class="headerlink" title="新建容器并启动"></a>新建容器并启动</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">docker run [options] image</span><br><span class="line"><span class="meta">#</span><span class="bash"> 参数说明</span></span><br><span class="line">--name=&quot;Name&quot;			指定容器名</span><br><span class="line">-d						后台方式运行</span><br><span class="line">-it						交互方式运行</span><br><span class="line">-p						指定容器端口,常用 主机端口:容器端口(主机端口映射到容器端口)</span><br><span class="line">-v 	主机目录:容器目录	   指定容器数据卷,将主机目录映射到指定的容器目录进行数据持久化和同步</span><br><span class="line"></span><br><span class="line">docker run -it centos	#交互式启动并进入容器,-it 后可跟镜像id</span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">exit</span> 从容器中退出</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 容器不停止推出 Ctrl + P + Q</span></span><br></pre></td></tr></table></figure>

<h4 id="docker-ps-列出所有运行的容器"><a href="#docker-ps-列出所有运行的容器" class="headerlink" title="docker ps 列出所有运行的容器"></a>docker ps 列出所有运行的容器</h4><table>
<thead>
<tr>
<th>参数</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>-a</td>
<td>列出正在运行的+历史运行过的容器</td>
</tr>
<tr>
<td>-n&#x3D;?</td>
<td>最近创建的?个容器</td>
</tr>
<tr>
<td>-q</td>
<td>只显示容器的编号</td>
</tr>
</tbody></table>
<h4 id="docker-rm-删除容器"><a href="#docker-rm-删除容器" class="headerlink" title="docker rm 删除容器"></a>docker rm 删除容器</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker rm 容器id	# 删除指定容器,不能删除正在运行的容器,添加 -f 可强制删除</span><br></pre></td></tr></table></figure>

<h4 id="启动和停止容器"><a href="#启动和停止容器" class="headerlink" title="启动和停止容器"></a>启动和停止容器</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker start 容器id	#启动容器</span><br><span class="line">docker restart 容器id	#重启容器</span><br><span class="line">docker stop 容器id	#停止当前运行的容器</span><br><span class="line">docker kill	容器id	#强制停止当前容器</span><br></pre></td></tr></table></figure>

<h3 id="常用其他命令"><a href="#常用其他命令" class="headerlink" title="常用其他命令"></a>常用其他命令</h3><h4 id="docker-logs-打印日志"><a href="#docker-logs-打印日志" class="headerlink" title="docker logs 打印日志"></a>docker logs 打印日志</h4><p><code>docker logs -tf --tail 10 容器id</code>：打印正在运行容器的最新的10条日志</p>
<h4 id="docker-ps-查看容器内的进程信息"><a href="#docker-ps-查看容器内的进程信息" class="headerlink" title="docker ps 查看容器内的进程信息"></a>docker ps 查看容器内的进程信息</h4><h4 id="docker-top-查看容器内的进程信息"><a href="#docker-top-查看容器内的进程信息" class="headerlink" title="docker top 查看容器内的进程信息"></a>docker top 查看容器内的进程信息</h4><p><code>docker top 容器id</code>:查看相关的容器进程信息</p>
<h4 id="docker-inspect-查看容器的详细元数据"><a href="#docker-inspect-查看容器的详细元数据" class="headerlink" title="docker inspect 查看容器的详细元数据"></a>docker inspect 查看容器的详细元数据</h4><h4 id="docker-cp-文件拷贝到主机"><a href="#docker-cp-文件拷贝到主机" class="headerlink" title="docker cp 文件拷贝到主机"></a>docker cp 文件拷贝到主机</h4><p>拷贝是一个手动过程,未来可通过数据卷实现自动拷贝</p>
<p>用法:<code>docker cp 容器id:目录文件 宿主机目录位置</code></p>
<p>示例:<code>docker cp 7acc78a184ab:/home/test.go /home</code></p>
<h3 id="进入当前正在运行的容器"><a href="#进入当前正在运行的容器" class="headerlink" title="进入当前正在运行的容器"></a>进入当前正在运行的容器</h3><p><code>docker exec -it 容器id COMMAND</code></p>
<p>进入容器后开启一个新的终端</p>
<p><code>docker attach 容器id COMMAND</code></p>
<p>进入容器中正在执行的终端</p>
<h2 id="实战练习"><a href="#实战练习" class="headerlink" title="实战练习"></a>实战练习</h2><h3 id="docker-部署-Nginx"><a href="#docker-部署-Nginx" class="headerlink" title="docker 部署 Nginx"></a>docker 部署 Nginx</h3><ol>
<li>搜索镜像</li>
<li>下载镜像</li>
<li>运行测试</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 搜索 Nginx 镜像</span></span><br><span class="line">root@ALi:~# docker search nginx</span><br><span class="line">NAME                              DESCRIPTION                                     STARS               OFFICIAL            AUTOMATED</span><br><span class="line">nginx                             Official build of Nginx.                        16043               [OK]                </span><br><span class="line">jwilder/nginx-proxy               Automated Nginx reverse proxy for docker con…   2104                                    [OK]</span><br><span class="line">richarvey/nginx-php-fpm           Container running Nginx + PHP-FPM capable of…   819                                     [OK]</span><br><span class="line">jc21/nginx-proxy-manager          Docker container for managing Nginx proxy ho…   301                                     </span><br><span class="line">linuxserver/nginx                 An Nginx container, brought to you by LinuxS…   161                                     </span><br><span class="line">tiangolo/nginx-rtmp               Docker image with Nginx using the nginx-rtmp…   148                                     [OK]</span><br><span class="line">jlesage/nginx-proxy-manager       Docker container for Nginx Proxy Manager        147                                     [OK]</span><br><span class="line">alfg/nginx-rtmp                   NGINX, nginx-rtmp-module and FFmpeg from sou…   112                                     [OK]</span><br><span class="line">nginxdemos/hello                  NGINX webserver that serves a simple page co…   81                                      [OK]</span><br><span class="line">privatebin/nginx-fpm-alpine       PrivateBin running on an Nginx, php-fpm &amp; Al…   61                                      [OK]</span><br><span class="line">nginx/nginx-ingress               NGINX and  NGINX Plus Ingress Controllers fo…   59                                      </span><br><span class="line">nginxinc/nginx-unprivileged       Unprivileged NGINX Dockerfiles                  56                                      </span><br><span class="line">nginxproxy/nginx-proxy            Automated Nginx reverse proxy for docker con…   33                                      </span><br><span class="line">staticfloat/nginx-certbot         Opinionated setup for automatic TLS certs lo…   25                                      [OK]</span><br><span class="line">nginx/nginx-prometheus-exporter   NGINX Prometheus Exporter for NGINX and NGIN…   22                                      </span><br><span class="line">schmunk42/nginx-redirect          A very simple container to redirect HTTP tra…   19                                      [OK]</span><br><span class="line">centos/nginx-112-centos7          Platform for running nginx 1.12 or building …   16                                      </span><br><span class="line">centos/nginx-18-centos7           Platform for running nginx 1.8 or building n…   13                                      </span><br><span class="line">bitwarden/nginx                   The Bitwarden nginx web server acting as a r…   12                                      </span><br><span class="line">flashspys/nginx-static            Super Lightweight Nginx Image                   11                                      [OK]</span><br><span class="line">mailu/nginx                       Mailu nginx frontend                            10                                      [OK]</span><br><span class="line">webdevops/nginx                   Nginx container                                 9                                       [OK]</span><br><span class="line">sophos/nginx-vts-exporter         Simple server that scrapes Nginx vts stats a…   7                                       [OK]</span><br><span class="line">ansibleplaybookbundle/nginx-apb   An APB to deploy NGINX                          3                                       [OK]</span><br><span class="line">wodby/nginx                       Generic nginx                                   1                                       [OK]</span><br><span class="line"><span class="meta">#</span><span class="bash"> 下载 Nginx 镜像</span></span><br><span class="line">root@ALi:~# docker pull nginx</span><br><span class="line">Using default tag: latest</span><br><span class="line">latest: Pulling from library/nginx</span><br><span class="line">a2abf6c4d29d: Pull complete </span><br><span class="line">a9edb18cadd1: Pull complete </span><br><span class="line">589b7251471a: Pull complete </span><br><span class="line">186b1aaa4aa6: Pull complete </span><br><span class="line">b4df32aa5a72: Pull complete </span><br><span class="line">a0bcbecc962e: Pull complete </span><br><span class="line">Digest: sha256:0d17b565c37bcbd895e9d92315a05c1c3c9a29f762b011a10c54a66cd53c9b31</span><br><span class="line">Status: Downloaded newer image for nginx:latest</span><br><span class="line">docker.io/library/nginx:latest</span><br><span class="line"><span class="meta">#</span><span class="bash"> 验证 Nginx 镜像是否下载成功</span></span><br><span class="line">root@ALi:~# docker images</span><br><span class="line">REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">nginx               latest              605c77e624dd        21 hours ago        141MB</span><br><span class="line">mysql               latest              3218b38490ce        9 days ago          516MB</span><br><span class="line">hello-world         latest              feb5d9fea6a5        3 months ago        13.3kB</span><br><span class="line">centos              latest              5d0da3dc9764        3 months ago        231MB</span><br><span class="line"><span class="meta">#</span><span class="bash"> 新建容器并运行 Nginx,同时完成端口映射和命名</span></span><br><span class="line">root@ALi:~# docker run --name first-Nginx -d -p 3000:80 nginx</span><br><span class="line">12fe23e2bac31ebcce62e4fdfe8ae85108c2afa94a1c47e7ee77f99a0e590dba</span><br><span class="line">root@ALi:~# docker ps</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                  NAMES</span><br><span class="line">12fe23e2bac3        nginx               &quot;/docker-entrypoint.…&quot;   3 seconds ago       Up 2 seconds        0.0.0.0:3000-&gt;80/tcp   first-Nginx</span><br><span class="line"><span class="meta">#</span><span class="bash"> 验证是否正确开启 Nginx, 以下为y</span></span><br><span class="line">root@ALi:~# curl localhost:3000</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;title&gt;Welcome to nginx!&lt;/title&gt;</span><br><span class="line">&lt;style&gt;</span><br><span class="line">html &#123; color-scheme: light dark; &#125;</span><br><span class="line">body &#123; width: 35em; margin: 0 auto;</span><br><span class="line">font-family: Tahoma, Verdana, Arial, sans-serif; &#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h1&gt;Welcome to nginx!&lt;/h1&gt;</span><br><span class="line">&lt;p&gt;If you see this page, the nginx web server is successfully installed and</span><br><span class="line">working. Further configuration is required.&lt;/p&gt;</span><br><span class="line"></span><br><span class="line">&lt;p&gt;For online documentation and support please refer to</span><br><span class="line">&lt;a href=&quot;http://nginx.org/&quot;&gt;nginx.org&lt;/a&gt;.&lt;br/&gt;</span><br><span class="line">Commercial support is available at</span><br><span class="line">&lt;a href=&quot;http://nginx.com/&quot;&gt;nginx.com&lt;/a&gt;.&lt;/p&gt;</span><br><span class="line"></span><br><span class="line">&lt;p&gt;&lt;em&gt;Thank you for using nginx.&lt;/em&gt;&lt;/p&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h2 id="docker-镜像"><a href="#docker-镜像" class="headerlink" title="docker 镜像"></a>docker 镜像</h2><h3 id="docker-commit（慎用）"><a href="#docker-commit（慎用）" class="headerlink" title="docker commit（慎用）"></a>docker commit（慎用）</h3><p>需要保存当前容器的状态,便可通过 commit 提交,来获得一个对象.</p>
<table>
<thead>
<tr>
<th>名称，速记‎</th>
<th>‎默认值</th>
<th>‎描述‎</th>
</tr>
</thead>
<tbody><tr>
<td><code>--author</code>‎,‎<code>-a</code></td>
<td></td>
<td>‎作者（例如，”John Hannibal Smith&lt;<a href="mailto:&#104;&#x61;&#x6e;&#110;&#x69;&#x62;&#97;&#108;&#64;&#x61;&#x2d;&#116;&#101;&#x61;&#x6d;&#46;&#99;&#111;&#x6d;">&#104;&#x61;&#x6e;&#110;&#x69;&#x62;&#97;&#108;&#64;&#x61;&#x2d;&#116;&#101;&#x61;&#x6d;&#46;&#99;&#111;&#x6d;</a>&gt;“）‎</td>
</tr>
<tr>
<td><code>--change</code>‎,‎<code>-c</code></td>
<td></td>
<td>‎将 Dockerfile 指令应用于创建的映像‎</td>
</tr>
<tr>
<td><code>--message</code>‎,‎<code>-m</code></td>
<td></td>
<td>‎提交消息‎</td>
</tr>
<tr>
<td><code>--pause</code>‎,‎<code>-p</code></td>
<td><code>true</code></td>
<td>‎在提交期间暂停容器‎</td>
</tr>
</tbody></table>
<p>例如:<code>docker commit c3f279d17e0a  svendowideit/testimage:version3</code></p>
<h2 id="容器数据卷"><a href="#容器数据卷" class="headerlink" title="容器数据卷"></a>容器数据卷</h2><p>如果数据都在容器中,一旦删除容器,数据也会丢失.<strong>如何使数据持久化?</strong></p>
<p>为解决这个问题, Docker具备一个数据共享技术进行容器数据的持久化和同步操作.</p>
<h3 id="使用数据卷"><a href="#使用数据卷" class="headerlink" title="使用数据卷"></a>使用数据卷</h3><h4 id="直接使用命令进行挂在-v"><a href="#直接使用命令进行挂在-v" class="headerlink" title="直接使用命令进行挂在-v"></a>直接使用命令进行挂在<code>-v</code></h4><p><code>docker run -it -v 主机目录:容器目录</code></p>
<p>例如:<code>docker run -d -p 3310:3306  -v /home/mysql/conf:/etc/mysql/conf.d -v /home/mysql/data:/var/lib/mysql -e MYSQL_ROOT_PASSWORD=mysql2022 --name=&quot;mysql01&quot; mysql</code></p>
<p>解释:</p>
<ol>
<li><code>-v</code>可使用多次,挂载多个目录</li>
<li><code>-e</code>配置环境参数,<code>MYSQL_ROOT_PASSWORD=centos-2022</code>就是配置 MySQL的 root 密码为<code>centos-2022</code></li>
<li><code>-p 3310:3306</code>将主机的3310端口映射到该容器的3306端口</li>
</ol>
<h4 id="数据卷容器"><a href="#数据卷容器" class="headerlink" title="数据卷容器"></a>数据卷容器</h4><p><strong>使用<code>docker run --volumes-from</code>命令开启一个新容器同时挂载已挂载于容器中的数据卷以实现数据卷共享和同步</strong>.</p>
<p>例如:<code>docker run -it --name docekr02 --volumes-from docker01 wenbin/dockerfile01:1.0</code></p>
<p>帮助容器之间配置信息传递、数据持久化和同步。数据卷容器的生命周期持续到无容器使用该数据卷。</p>
<h2 id="DockerFile"><a href="#DockerFile" class="headerlink" title="DockerFile"></a>DockerFile</h2><p>DockerFile就是构建Docker镜像的脚本文件。</p>
<h3 id="构建步骤"><a href="#构建步骤" class="headerlink" title="构建步骤"></a>构建步骤</h3><ol>
<li>编写 dockerfile 文件</li>
<li>docker build 构建成为一个镜像</li>
<li>docker run 运行镜像</li>
<li>docker push 发布镜像（可选）</li>
</ol>
<p>简单脚本示例:</p>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建dockerfile文件,文件名建议带有dockerfile</span></span><br><span class="line"><span class="comment"># 脚本中的指令大写</span></span><br><span class="line"><span class="keyword">FROM</span> centos</span><br><span class="line"><span class="comment"># 挂载 &quot;/volumes1&quot;, &quot;/volumes2&quot; 两个数据卷</span></span><br><span class="line"><span class="keyword">VOLUME</span><span class="bash"> [<span class="string">&quot;/volumes1&quot;</span>, <span class="string">&quot;/volumes2&quot;</span>]</span></span><br><span class="line"><span class="keyword">CMD</span><span class="bash"> <span class="built_in">echo</span> <span class="string">&quot;----end----&quot;</span></span></span><br><span class="line"><span class="keyword">CMD</span><span class="bash"> /bin/bash</span></span><br></pre></td></tr></table></figure>

<p>使用<code>docker build</code>命令运行:<code>docker build -f /dockerfile1 -t wenbin/dockerfile01:1.0 .</code></p>
<p>检查一下,发现容器构建成功</p>
<p>再使用<code>docker run</code>命令运行容器.</p>
<h3 id="指令"><a href="#指令" class="headerlink" title="指令"></a>指令</h3><h4 id="基础知识"><a href="#基础知识" class="headerlink" title="基础知识"></a>基础知识</h4><ol>
<li>每个指令必须是大写</li>
<li>从上到下顺序执行</li>
<li><code>#</code>注释</li>
<li>每个指令都会创建提交一个镜像层</li>
<li>面向开发者</li>
</ol>
<h4 id="命令"><a href="#命令" class="headerlink" title="命令"></a>命令</h4><table>
<thead>
<tr>
<th>命令</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>FROM</td>
<td>基础镜像，一切从这里开始</td>
</tr>
<tr>
<td>MAINTAINER</td>
<td>镜像作者、维护者，名字+邮箱</td>
</tr>
<tr>
<td>RUN</td>
<td>镜像构建时需要运行的命令</td>
</tr>
<tr>
<td>VOLUME</td>
<td>镜像挂载的目录</td>
</tr>
<tr>
<td>EXPOSE</td>
<td>对外暴露的端口配置</td>
</tr>
<tr>
<td>CMD</td>
<td>指定容器启动时要运行的命令，仅最后一个生效，可以追加命令</td>
</tr>
<tr>
<td>ENTRYPOINT</td>
<td>指定容器启动时要运行的命令，可以追加命令</td>
</tr>
<tr>
<td>ONBUILD</td>
<td>当构建一个被继承的 dockerfile 时会运行</td>
</tr>
<tr>
<td>COPY</td>
<td>类似 ADD， 将文件拷贝到镜像中</td>
</tr>
<tr>
<td>ENV</td>
<td>构建时设置的环境变量</td>
</tr>
</tbody></table>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="http://sdupc.top">Chao Pang</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="http://sdupc.top/2024/05/14/docker/">http://sdupc.top/2024/05/14/docker/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://sdupc.top" target="_blank">Chao Pang的个人主页</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Docker/">Docker</a></div><div class="post_share"><div class="social-share" data-image="https://s2.loli.net/2024/07/28/ZfVE1yXw3eO4tI5.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2024/06/21/dockerfile/" title="Dockerfile入门与实践"><img class="cover" src="https://s2.loli.net/2024/07/28/fLYDzOKwiHcB9jR.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Dockerfile入门与实践</div></div></a></div><div class="next-post pull-right"><a href="/2024/03/28/software_design/" title="现代软件开发中的模式"><img class="cover" src="https://s2.loli.net/2024/03/28/C79cXYjarenqxOo.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">现代软件开发中的模式</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2024/06/21/dockerfile/" title="Dockerfile入门与实践"><img class="cover" src="https://s2.loli.net/2024/07/28/fLYDzOKwiHcB9jR.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-06-21</div><div class="title">Dockerfile入门与实践</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://i.loli.net/2021/11/29/nu4tpl8PIgFQBAr.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Chao Pang</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">34</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">27</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">9</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/Pang-chao"><i class="fab fa-github"></i><span>关注我</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/Pang-chao" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:pc@sdupc.top" target="_blank" title="Email"><i class="fas fa-envelope"></i></a><a class="social-icon" href="https://leetcode-cn.com/u/sdu-pc" target="_blank" title="Leetcode"><i class="fas fa-code"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">一个热爱古诗词和历史的 ISTJ ，欢迎来到我的个人主页~有任何问题都可以与我邮件交流！邮箱：pc@sdupc.top</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Docker"><span class="toc-number">1.</span> <span class="toc-text">Docker</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%A7%E7%BA%B2"><span class="toc-number">1.1.</span> <span class="toc-text">大纲</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9D%E7%BA%A7"><span class="toc-number">1.1.1.</span> <span class="toc-text">初级</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%AD%E7%BA%A7"><span class="toc-number">1.1.2.</span> <span class="toc-text">中级</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%AB%98%E7%BA%A7"><span class="toc-number">1.1.3.</span> <span class="toc-text">高级</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%B5%B7%E6%AD%A5"><span class="toc-number">1.2.</span> <span class="toc-text">起步</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Docker-%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="toc-number">1.2.1.</span> <span class="toc-text">Docker 应用场景</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%87%E6%A1%A3"><span class="toc-number">1.2.2.</span> <span class="toc-text">文档</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%8D%E8%AF%8D%E8%A7%A3%E9%87%8A"><span class="toc-number">1.2.3.</span> <span class="toc-text">名词解释</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Debian-%E5%AE%89%E8%A3%85-Docker"><span class="toc-number">1.2.4.</span> <span class="toc-text">Debian 安装 Docker</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8D%B8%E8%BD%BD-Docker"><span class="toc-number">1.2.5.</span> <span class="toc-text">卸载 Docker</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Docker-%E5%8E%9F%E7%90%86"><span class="toc-number">1.3.</span> <span class="toc-text">Docker 原理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Docker-%E5%BF%AB%E4%BA%8E-VM-%E7%9A%84%E5%8E%9F%E7%90%86"><span class="toc-number">1.3.1.</span> <span class="toc-text">Docker 快于 VM 的原理</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Docker-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4-Use-the-Docker-command-line-Docker-Documentation"><span class="toc-number">1.4.</span> <span class="toc-text">[Docker 常用命令](Use the Docker command line | Docker Documentation)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%AE%E5%8A%A9%E5%91%BD%E4%BB%A4"><span class="toc-number">1.4.1.</span> <span class="toc-text">帮助命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%95%9C%E5%83%8F%E5%91%BD%E4%BB%A4"><span class="toc-number">1.4.2.</span> <span class="toc-text">镜像命令</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#docker-images-%E5%B1%95%E7%A4%BA%E9%95%9C%E5%83%8F"><span class="toc-number">1.4.2.1.</span> <span class="toc-text">docker images 展示镜像</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#docker-search-%E6%90%9C%E7%B4%A2%E9%95%9C%E5%83%8F"><span class="toc-number">1.4.2.2.</span> <span class="toc-text">docker search 搜索镜像</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#docker-pull-%E4%B8%8B%E8%BD%BD%E9%95%9C%E5%83%8F-Docker-Hub-Container-Image-Library-App-Containerization"><span class="toc-number">1.4.2.3.</span> <span class="toc-text">[docker pull 下载镜像](Docker Hub Container Image Library | App Containerization)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#docker-rmi-%E5%88%A0%E9%99%A4%E9%95%9C%E5%83%8F"><span class="toc-number">1.4.2.4.</span> <span class="toc-text">docker rmi 删除镜像</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#docker-image-ls-%E5%88%97%E5%87%BA%E9%95%9C%E5%83%8F"><span class="toc-number">1.4.2.5.</span> <span class="toc-text">docker image ls 列出镜像</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%B9%E5%99%A8%E5%91%BD%E4%BB%A4"><span class="toc-number">1.4.3.</span> <span class="toc-text">容器命令</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B0%E5%BB%BA%E5%AE%B9%E5%99%A8%E5%B9%B6%E5%90%AF%E5%8A%A8"><span class="toc-number">1.4.3.1.</span> <span class="toc-text">新建容器并启动</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#docker-ps-%E5%88%97%E5%87%BA%E6%89%80%E6%9C%89%E8%BF%90%E8%A1%8C%E7%9A%84%E5%AE%B9%E5%99%A8"><span class="toc-number">1.4.3.2.</span> <span class="toc-text">docker ps 列出所有运行的容器</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#docker-rm-%E5%88%A0%E9%99%A4%E5%AE%B9%E5%99%A8"><span class="toc-number">1.4.3.3.</span> <span class="toc-text">docker rm 删除容器</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%90%AF%E5%8A%A8%E5%92%8C%E5%81%9C%E6%AD%A2%E5%AE%B9%E5%99%A8"><span class="toc-number">1.4.3.4.</span> <span class="toc-text">启动和停止容器</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E5%85%B6%E4%BB%96%E5%91%BD%E4%BB%A4"><span class="toc-number">1.4.4.</span> <span class="toc-text">常用其他命令</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#docker-logs-%E6%89%93%E5%8D%B0%E6%97%A5%E5%BF%97"><span class="toc-number">1.4.4.1.</span> <span class="toc-text">docker logs 打印日志</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#docker-ps-%E6%9F%A5%E7%9C%8B%E5%AE%B9%E5%99%A8%E5%86%85%E7%9A%84%E8%BF%9B%E7%A8%8B%E4%BF%A1%E6%81%AF"><span class="toc-number">1.4.4.2.</span> <span class="toc-text">docker ps 查看容器内的进程信息</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#docker-top-%E6%9F%A5%E7%9C%8B%E5%AE%B9%E5%99%A8%E5%86%85%E7%9A%84%E8%BF%9B%E7%A8%8B%E4%BF%A1%E6%81%AF"><span class="toc-number">1.4.4.3.</span> <span class="toc-text">docker top 查看容器内的进程信息</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#docker-inspect-%E6%9F%A5%E7%9C%8B%E5%AE%B9%E5%99%A8%E7%9A%84%E8%AF%A6%E7%BB%86%E5%85%83%E6%95%B0%E6%8D%AE"><span class="toc-number">1.4.4.4.</span> <span class="toc-text">docker inspect 查看容器的详细元数据</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#docker-cp-%E6%96%87%E4%BB%B6%E6%8B%B7%E8%B4%9D%E5%88%B0%E4%B8%BB%E6%9C%BA"><span class="toc-number">1.4.4.5.</span> <span class="toc-text">docker cp 文件拷贝到主机</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%9B%E5%85%A5%E5%BD%93%E5%89%8D%E6%AD%A3%E5%9C%A8%E8%BF%90%E8%A1%8C%E7%9A%84%E5%AE%B9%E5%99%A8"><span class="toc-number">1.4.5.</span> <span class="toc-text">进入当前正在运行的容器</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E6%88%98%E7%BB%83%E4%B9%A0"><span class="toc-number">1.5.</span> <span class="toc-text">实战练习</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#docker-%E9%83%A8%E7%BD%B2-Nginx"><span class="toc-number">1.5.1.</span> <span class="toc-text">docker 部署 Nginx</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#docker-%E9%95%9C%E5%83%8F"><span class="toc-number">1.6.</span> <span class="toc-text">docker 镜像</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#docker-commit%EF%BC%88%E6%85%8E%E7%94%A8%EF%BC%89"><span class="toc-number">1.6.1.</span> <span class="toc-text">docker commit（慎用）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%B9%E5%99%A8%E6%95%B0%E6%8D%AE%E5%8D%B7"><span class="toc-number">1.7.</span> <span class="toc-text">容器数据卷</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E6%95%B0%E6%8D%AE%E5%8D%B7"><span class="toc-number">1.7.1.</span> <span class="toc-text">使用数据卷</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%9B%B4%E6%8E%A5%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4%E8%BF%9B%E8%A1%8C%E6%8C%82%E5%9C%A8-v"><span class="toc-number">1.7.1.1.</span> <span class="toc-text">直接使用命令进行挂在-v</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%8D%B7%E5%AE%B9%E5%99%A8"><span class="toc-number">1.7.1.2.</span> <span class="toc-text">数据卷容器</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#DockerFile"><span class="toc-number">1.8.</span> <span class="toc-text">DockerFile</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9E%84%E5%BB%BA%E6%AD%A5%E9%AA%A4"><span class="toc-number">1.8.1.</span> <span class="toc-text">构建步骤</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8C%87%E4%BB%A4"><span class="toc-number">1.8.2.</span> <span class="toc-text">指令</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86"><span class="toc-number">1.8.2.1.</span> <span class="toc-text">基础知识</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%91%BD%E4%BB%A4"><span class="toc-number">1.8.2.2.</span> <span class="toc-text">命令</span></a></li></ol></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2024/09/22/linux_command/" title="常用的Linux命令"><img src="https://s2.loli.net/2024/09/22/a4XSL1dY6xsJVHC.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="常用的Linux命令"/></a><div class="content"><a class="title" href="/2024/09/22/linux_command/" title="常用的Linux命令">常用的Linux命令</a><time datetime="2024-09-22T04:22:35.000Z" title="发表于 2024-09-22 12:22:35">2024-09-22</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/09/08/LLM_app/" title="大模型应用开发技术"><img src="https://s2.loli.net/2024/09/08/xTHF6bdcG4CeU7r.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="大模型应用开发技术"/></a><div class="content"><a class="title" href="/2024/09/08/LLM_app/" title="大模型应用开发技术">大模型应用开发技术</a><time datetime="2024-09-08T09:33:41.000Z" title="发表于 2024-09-08 17:33:41">2024-09-08</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/08/18/regex/" title="正则表达式"><img src="https://s2.loli.net/2024/09/22/IBg6rktAYswW3yN.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="正则表达式"/></a><div class="content"><a class="title" href="/2024/08/18/regex/" title="正则表达式">正则表达式</a><time datetime="2024-08-18T10:02:09.000Z" title="发表于 2024-08-18 18:02:09">2024-08-18</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/07/06/dps/" title="数字信号处理"><img src="https://s2.loli.net/2024/07/06/KlhjmBI9UvkFCAx.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="数字信号处理"/></a><div class="content"><a class="title" href="/2024/07/06/dps/" title="数字信号处理">数字信号处理</a><time datetime="2024-07-06T07:17:56.000Z" title="发表于 2024-07-06 15:17:56">2024-07-06</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/06/21/dockerfile/" title="Dockerfile入门与实践"><img src="https://s2.loli.net/2024/07/28/fLYDzOKwiHcB9jR.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Dockerfile入门与实践"/></a><div class="content"><a class="title" href="/2024/06/21/dockerfile/" title="Dockerfile入门与实践">Dockerfile入门与实践</a><time datetime="2024-06-21T04:39:17.000Z" title="发表于 2024-06-21 12:39:17">2024-06-21</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2024 By Chao Pang</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=4.13.0"></script><script src="/js/main.js?v=4.13.0"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"><script>(() => {
  const $mermaid = document.querySelectorAll('#article-container .mermaid-wrap')
  if ($mermaid.length === 0) return
  const runMermaid = () => {
    window.loadMermaid = true
    const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

    Array.from($mermaid).forEach((item, index) => {
      const mermaidSrc = item.firstElementChild
      const mermaidThemeConfig = '%%{init:{ \'theme\':\'' + theme + '\'}}%%\n'
      const mermaidID = 'mermaid-' + index
      const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent

      const renderFn = mermaid.render(mermaidID, mermaidDefinition)

      const renderV10 = () => {
        renderFn.then(({svg}) => {
          mermaidSrc.insertAdjacentHTML('afterend', svg)
        })
      }

      const renderV9 = svg => {
        mermaidSrc.insertAdjacentHTML('afterend', svg)
      }

      typeof renderFn === 'string' ? renderV9(renderFn) : renderV10()
    })
  }

  const loadMermaid = () => {
    window.loadMermaid ? runMermaid() : getScript('https://cdn.jsdelivr.net/npm/mermaid@10.8.0/dist/mermaid.min.js').then(runMermaid)
  }

  btf.addGlobalFn('themeChange', runMermaid, 'mermaid')

  window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
})()</script></div><script defer="defer" id="fluttering_ribbon" mobile="true" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/canvas-fluttering-ribbon.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = true;
document.body.addEventListener('input', POWERMODE);
</script><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/click-heart.min.js" async="async" mobile="false"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>